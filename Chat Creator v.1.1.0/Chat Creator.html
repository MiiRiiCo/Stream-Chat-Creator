<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <style>
            * {
                margin:0;
                box-sizing:border-box;
            }

            body {
                display:flex;
                background-image:url("Hintergrund/Hintergrund1.svg");
                background-size:cover;
                background-position:center;
                --nav-blur-effect: blur(50px);
            }

            body[data-flow="hoch"] #Widget-PH {
                flex-direction:column;
            }

            body[data-flow="runter"] #Widget-PH {
                flex-direction:column-reverse;
            }

            body[data-flow="hoch"] .chat-line-PH {
                margin-top:var(--message-space);
            }

            body[data-flow="runter"] .chat-line-PH {
                margin-bottom:var(--message-space);
            }

            body[data-flow="hoch"] .chat-line {
                animation: var(--animation-up);
            }

            body[data-flow="runter"] .chat-line {
                animation: var(--animation-down);
            }

            main {
                position:relative;
                height:100vh;
                width:calc(100% - 400px);
                right:0;
                overflow:hidden;
                display:flex;
                justify-content: center;
                align-items: center;
            }

            #Widget, #Widget-PH {
                position:absolute;
            }

            #Widget {
                background-color:var(--bg-color-chat);
                overflow:hidden;
                border-radius:var(--chat-border-radius);
                transition:background-color var(--message-move-time);
                border:solid #ffffff30 1px;
                height:600px;
                width:400px;
            }

            #Widget-PH {
                display:flex;
                justify-content: flex-end;
                padding:var(--chat-padding);
                opacity:0;
                height:600px;
                width:400px;
            }

            .chat-line-SHOW {
                position:absolute;
                transition:top var(--message-move-time);
            }

            .chat-line-PH {
                background-color:#0000ff;
            }

            .usernameCont {
                width:100%;
                display:flex;
                justify-content:var(--username-position);
            }

            .username {
                max-width: 100%;
                padding: var(--username-padding);
                color:var(--color-username);
                font-family:var(--username-font-family);
                font-size:var(--username-font-size);
                border-radius:var(--username-border-radius);
                width:var(--username-size);
                background-color:var(--bg-color-username);
                text-align:var(--username-align);
            }

            .messageCont {
                width:100%;
                display:flex;
                justify-content:var(--message-position);
            }

            .message {
                max-width: 100%;
                padding: var(--message-padding);
                color:var(--color-message);
                font-family:var(--message-font-family);
                font-size:var(--message-font-size);
                border-radius:var(--message-border-radius);
                width:var(--message-size);
                background-color:var(--bg-color-message);
                text-align:var(--message-align);
            }

            .emote {
                position:relative;
                top:.25em;
                display:inline-block;
                height:1.4em;
            }

            nav {
                position:relative;
                height:100vh;
                width:400px;
                background:#1e1e1ea0;
                backdrop-filter:var(--nav-blur-effect);
                font-family:"Arial";
                overflow:auto;
                box-shadow: 0 0 10px #000000ff;
                z-index:2;
                outline: solid #ffffff30 1px;
            }

            nav::-webkit-scrollbar {
                display:none;
            }

            .navSelectionGroup {
                display:flex;
            }

            .navSetting {
                border-bottom-style:solid;
                border-color:#ffffff30;
                border-width:1px;
                padding:20px;
                position:relative;
            }

            .navSelectionGroup {
                margin-top:10px;
                display:flex;
                align-items: center;
            }

            .navGridCont2x2 {
                display:inline-grid;
                grid-template-columns:auto auto;
            }

            .navGridCont3x3 {
                display:inline-grid;
                grid-template-columns:auto auto auto;
            }

            .navRadioButton {
                min-width:40px;
                height:40px;
                background-color:#ffffff20;
                background-image:linear-gradient(-45deg, #00000040, transparent);
                color:#ffffff;
                border:solid #ffffff30 1px;
                border-radius:3px;
                font-size:16px;
                margin-right:5px;
                cursor:pointer;
                transition:background-color .1s;
                display:inline-flex;
                justify-content: center;
                align-items: center;
                padding:5px;
                overflow:hidden;
                font-size:14px;
            }

            .navRadioButton:hover {
                background-color:#ffffff30;
            }

            .navRadioButton[data-active="true"] {
                background-color:#ffffff40;
                background-image:linear-gradient(135deg, #00000040, transparent);
            }

            input[type="color" i] {
                border:none;
                background:transparent;
                height:35px;
                width:30px;
                margin:0 5px 0 0;
                padding:0;
                color:transparent;
            }

            .navTitle {
                color:#ffffff;
                margin:10px 10px 0px 10px;
                border-radius:5px;
                height:60px;
                display:flex;
                justify-content: center;
                align-items: center;
                background:#2e2e2ef0;
                backdrop-filter:var(--nav-blur-effect);
                background-image:linear-gradient(-45deg, #00000040, transparent);
                box-shadow: 0 10px 10px -10px #000000ff;
                position:sticky;
                z-index:2;
                top:10px;
                border:solid #ffffff30 1px;
                font-weight:300;
            }

            .navDescr {
                color:#ffffff;
                font-size:18px;
            }

            .navTextbox {
                width:100%;
                border:none;
                padding:0px 12px;
                background-color:#ffffff20;
                background-image:linear-gradient(-45deg, #00000040, transparent);
                color:#ffffff;
                outline:none;
                margin-top:10px;
                border-radius:3px;
                display:inline;
                height:40px;
                max-height:100%;
                border:solid #ffffff30 1px;
            }

            .navTextboxSubmit {
                margin: 10px 10px 0 0;
                padding:.5em 1em;
                border:none;
                border-radius:3px;
                color:#ffffff;
                cursor:pointer;
                transition: background .1s;
            }

            .submitYes {
                background:#007900;
            }

            .submitYes:hover {
                background:#138a13;
            }

            .submitYes:active {
                background:#0a5f0a;
            }

            .submitNo {
                background:#9b0b0b;
            }

            .submitNo:hover {
                background:#bd2020;
            }

            .submitNo:active {
                background:#860909;
            }

            .navRangeVal {
                color:#ffffff;
                display:inline-flex;
                width:40px;
                justify-content: center;
            }

            .navRadioCheck {
                margin:0px 10px 0 0;
            }

            .navRadioCheckDescr {
                display:inline;
                color:#ffffff;
                margin:0 10px 0 0;
            }

            .navNumber {
                width:40px;
                height:40px;
                max-height:100%;
                border:none;
                background-color:#ffffff20;
                color:#ffffff;
                outline:none;
                text-align:center;
                border-radius:3px;
                border:solid 1px #ffffff30;
                background-image:linear-gradient(-45deg, #00000040, transparent);
            }

            .navNumber::-webkit-inner-spin-button {
                display:none;
            }

            .navNumberUnit {
                color:#ffffff;
                display:inline;
                margin-left:5px;
            }

            .navPreDescr {
                color:#ffffff;
                display:inline;
                margin-right:5px;
            }

            .previewCont {
                position:absolute;
                top:10px;
                height:50px;
                display:flex;
                align-items:center;
                background:#1e1e1ea0;
                background-image:linear-gradient(-45deg, #00000040, transparent);
                backdrop-filter:var(--nav-blur-effect);
                -webkit-backdrop-filter:var(--nav-blur-effect);
                max-width:100%;
                border-radius:3px;
                font-family:"Arial";
                padding:0 20px;
                border:solid #ffffff30 1px;
                overflow-x:auto;
            }

            .previewCont::-webkit-scrollbar {
                display:none;
            }

            .previewCont * {
                margin-top:0;
            }

            .previewCont .navDescr {
                margin-right:5px;
            }

            .previewCont .navSelectionGroup {
                margin-right:30px;
            }
            
            .saveAs {
                position:fixed;
                bottom:20px;
                right:20px;
                background:#007900;
                padding:1em 1.25em;
                border:none;
                border-radius:3px;
                color:#ffffff;
                box-shadow: 0 5px 10px #00000080;
                cursor:pointer;
                transition:transform .1s;
            }

            .saveAs:hover {
                transform:scale(1.1);
            }

            .saveAs:active {
                transform:scale(1);
            }

            @keyframes showMessageUp {
                from {
                    transform:translateY(100%);
                }
            }

            @keyframes showMessageDown {
                from {
                    transform:translateY(-100%);
                }
            }

            @keyframes hideMessage {
                to {
                    transform:scale(.9);
                    opacity:0;
                }
            }
        </style>
        <script type="text/javascript">
            var _global = typeof window === 'object' && window.window === window
            ? window : typeof self === 'object' && self.self === self
            ? self : typeof global === 'object' && global.global === global
            ? global
            : this
            function bom (blob, opts) {
                if (typeof opts === 'undefined') opts = { autoBom: false }
                    else if (typeof opts !== 'object') {
                        console.warn('Deprecated: Expected third argument to be a object');
                        opts = { autoBom: !opts }
                    }
                if (opts.autoBom && /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
                    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })
                }
                return blob
            }

            function download (url, name, opts) {
                var xhr = new XMLHttpRequest()
                xhr.open('GET', url);
                xhr.responseType = 'blob';
                xhr.onload = function () {
                    saveAs(xhr.response, name, opts);
                }
                xhr.onerror = function () {
                    console.error('could not download file');
                }
            xhr.send()
            }
            function corsEnabled (url) {
            var xhr = new XMLHttpRequest()
            xhr.open('HEAD', url, false)
            try {
                xhr.send()
            } catch (e) {}
            return xhr.status >= 200 && xhr.status <= 299
            }
            function click (node) {
            try {
                node.dispatchEvent(new MouseEvent('click'))
            } catch (e) {
                var evt = document.createEvent('MouseEvents')
                evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,
                                    20, false, false, false, false, 0, null)
                node.dispatchEvent(evt)
            }
            }
            var isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)

            var saveAs = _global.saveAs || (
            // probably in some web worker
            (typeof window !== 'object' || window !== _global)
                ? function saveAs () { /* noop */ }

            // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView
            : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)
            ? function saveAs (blob, name, opts) {
                var URL = _global.URL || _global.webkitURL
                var a = document.createElement('a')
                name = name || blob.name || 'download'

                a.download = name
                a.rel = 'noopener' // tabnabbing

                // TODO: detect chrome extensions & packaged apps
                // a.target = '_blank'

                if (typeof blob === 'string') {
                // Support regular links
                a.href = blob
                if (a.origin !== location.origin) {
                    corsEnabled(a.href)
                    ? download(blob, name, opts)
                    : click(a, a.target = '_blank')
                } else {
                    click(a)
                }
                } else {
                // Support blobs
                a.href = URL.createObjectURL(blob)
                setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s
                setTimeout(function () { click(a) }, 0)
                }
            }

            // Use msSaveOrOpenBlob as a second approach
            : 'msSaveOrOpenBlob' in navigator
            ? function saveAs (blob, name, opts) {
                name = name || blob.name || 'download'

                if (typeof blob === 'string') {
                if (corsEnabled(blob)) {
                    download(blob, name, opts)
                } else {
                    var a = document.createElement('a')
                    a.href = blob
                    a.target = '_blank'
                    setTimeout(function () { click(a) })
                }
                } else {
                navigator.msSaveOrOpenBlob(bom(blob, opts), name)
                }
            }

            // Fallback to using FileReader and a popup
            : function saveAs (blob, name, opts, popup) {
                // Open a popup immediately do go around popup blocker
                // Mostly only available on user interaction and the fileReader is async so...
                popup = popup || open('', '_blank')
                if (popup) {
                popup.document.title =
                popup.document.body.innerText = 'downloading...'
                }

                if (typeof blob === 'string') return download(blob, name, opts)

                var force = blob.type === 'application/octet-stream'
                var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari
                var isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent)

                if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {
                // Safari doesn't allow downloading of blob URLs
                var reader = new FileReader()
                reader.onloadend = function () {
                    var url = reader.result
                    url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')
                    if (popup) popup.location.href = url
                    else location = url
                    popup = null // reverse-tabnabbing #460
                }
                reader.readAsDataURL(blob)
                } else {
                var URL = _global.URL || _global.webkitURL
                var url = URL.createObjectURL(blob)
                if (popup) popup.location = url
                else location.href = url
                popup = null // reverse-tabnabbing #460
                setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s
                }
            }
            )

            _global.saveAs = saveAs.saveAs = saveAs

            if (typeof module !== 'undefined') {
            module.exports = saveAs;
            }
        </script>
        <script type="text/javascript">
            !function s(o,i,r){function a(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(c)return c(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return a(o[t][1][e]||e)},n,n.exports,s,o,i,r)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<r.length;e++)a(r[e]);return a}({1:[function(e,t,n){"use strict";e=e("./lib/client");t.exports={client:e,Client:e}},{"./lib/client":3}],2:[function(e,t,n){"use strict";function i(t,e){var n,s=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)),s}function u(s){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?i(Object(o),!0).forEach(function(e){var t,n;t=s,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):i(Object(o)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(o,e))})}return s}var l=e("node-fetch"),m=e("./utils");t.exports=function(e,t){var n=void 0!==e.url?e.url:e.uri;if(m.isURL(n)||(n="https://api.twitch.tv/kraken".concat("/"===n[0]?n:"/".concat(n))),m.isNode()){var s=Object.assign({method:"GET",json:!0},e);s.qs&&(o=new URLSearchParams(s.qs),n+="?".concat(o));var o={};"fetchAgent"in this.opts.connection&&(o.agent=this.opts.connection.fetchAgent);var o=l(n,u(u({},o),{},{method:s.method,headers:s.headers,body:s.body})),i={};o.then(function(e){return i={statusCode:e.status,headers:e.headers},s.json?e.json():e.text()}).then(function(e){return t(null,i,e)},function(e){return t(e,i,null)})}else{var r,a=Object.assign({method:"GET",headers:{}},e,{url:n}),c=new XMLHttpRequest;for(r in c.open(a.method,a.url,!0),a.headers)c.setRequestHeader(r,a.headers[r]);c.responseType="json",c.addEventListener("load",function(e){4===c.readyState&&(200!==c.status?t(c.status,null,null):t(null,null,c.response))}),c.send()}}},{"./utils":9,"node-fetch":10}],3:[function(p,d,e){!function(f){!function(){"use strict";function t(t,e){var n,s=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,n)),s}function i(s){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=s,e=o[n=e],n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(s,e,Object.getOwnPropertyDescriptor(o,e))})}return s}function H(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function n(e){if(this instanceof n==!1)return new n(e);this.opts=V.get(e,{}),this.opts.channels=this.opts.channels||[],this.opts.connection=this.opts.connection||{},this.opts.identity=this.opts.identity||{},this.opts.options=this.opts.options||{},this.clientId=V.get(this.opts.options.clientId,null),this._globalDefaultChannel=V.channel(V.get(this.opts.options.globalDefaultChannel,"#tmijs")),this._skipMembership=V.get(this.opts.options.skipMembership,!1),this._skipUpdatingEmotesets=V.get(this.opts.options.skipUpdatingEmotesets,!1),this._updateEmotesetsTimer=null,this._updateEmotesetsTimerDelay=V.get(this.opts.options.updateEmotesetsTimer,6e4),this.maxReconnectAttempts=V.get(this.opts.connection.maxReconnectAttempts,1/0),this.maxReconnectInterval=V.get(this.opts.connection.maxReconnectInterval,3e4),this.reconnect=V.get(this.opts.connection.reconnect,!0),this.reconnectDecay=V.get(this.opts.connection.reconnectDecay,1.5),this.reconnectInterval=V.get(this.opts.connection.reconnectInterval,1e3),this.reconnecting=!1,this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.secure=V.get(this.opts.connection.secure,!this.opts.connection.server&&!this.opts.connection.port),this.emotes="",this.emotesets={},this.channels=[],this.currentLatency=0,this.globaluserstate={},this.lastJoined="",this.latency=new Date,this.moderators={},this.pingLoop=null,this.pingTimeout=null,this.reason="",this.username="",this.userstate={},this.wasCloseCalled=!1,this.ws=null,e="error",this.opts.options.debug&&(e="info"),this.log=this.opts.logger||m;try{m.setLevel(e)}catch(e){}this.opts.channels.forEach(function(e,t,n){return n[t]=V.channel(e)}),l.call(this),this.setMaxListeners(0)}var e,o=void 0!==f?f:"undefined"!=typeof window?window:{},r=o.WebSocket||p("ws"),a=o.fetch||p("node-fetch"),c=p("./api"),u=p("./commands"),l=p("./events").EventEmitter,m=p("./logger"),q=p("./parser"),W=p("./timer"),V=p("./utils"),h=!1;for(e in V.inherits(n,l),u)n.prototype[e]=u[e];n.prototype.emits=function(e,t){for(var n=0;n<e.length;n++){var s=n<t.length?t[n]:t[t.length-1];this.emit.apply(this,[e[n]].concat(s))}},n.prototype.api=function(){h||(this.log.warn("Client.prototype.api is deprecated and will be removed for version 2.0.0"),h=!0),c.apply(void 0,arguments)},n.prototype.handleMessage=function(t){var n=this;if(t){this.listenerCount("raw_message")&&this.emit("raw_message",JSON.parse(JSON.stringify(t)),t);var e,s,o,i,r,a,c,u,l,m=V.channel(V.get(t.params[0],null)),h=V.get(t.params[1],null),f=V.get(t.tags["msg-id"],null),p=t.tags=q.badges(q.badgeInfo(q.emotes(t.tags)));for(e in p)"emote-sets"!==e&&"ban-duration"!==e&&"bits"!==e&&("boolean"==typeof(s=p[e])?s=null:"1"===s?s=!0:"0"===s?s=!1:"string"==typeof s&&(s=V.unescapeIRC(s)),p[e]=s);if(null===t.prefix)switch(t.command){case"PING":this.emit("ping"),this._isConnected()&&this.ws.send("PONG");break;case"PONG":var d=new Date;this.currentLatency=(d.getTime()-this.latency.getTime())/1e3,this.emits(["pong","_promisePing"],[[this.currentLatency]]),clearTimeout(this.pingTimeout);break;default:this.log.warn("Could not parse message with no prefix:\n".concat(JSON.stringify(t,null,4)))}else if("tmi.twitch.tv"===t.prefix)switch(t.command){case"002":case"003":case"004":case"372":case"375":case"CAP":break;case"001":this.username=t.params[0];break;case"376":this.log.info("Connected to server."),this.userstate[this._globalDefaultChannel]={},this.emits(["connected","_promiseConnect"],[[this.server,this.port],[null]]),this.reconnections=0,this.reconnectTimer=this.reconnectInterval,this.pingLoop=setInterval(function(){n._isConnected()&&n.ws.send("PING"),n.latency=new Date,n.pingTimeout=setTimeout(function(){null!==n.ws&&(n.wasCloseCalled=!1,n.log.error("Ping timeout."),n.ws.close(),clearInterval(n.pingLoop),clearTimeout(n.pingTimeout),clearTimeout(n._updateEmotesetsTimer))},V.get(n.opts.connection.timeout,9999))},6e4);var g=V.get(this.opts.options.joinInterval,2e3),_=new W(g=g<300?300:g),b=H(new Set([].concat(H(this.opts.channels),H(this.channels))));this.channels=[];for(var v=0;v<b.length;v++)!function(e){var t=b[e];_.add(function(){n._isConnected()&&n.join(t).catch(function(e){return n.log.error(e)})})}(v);_.next();break;case"NOTICE":var y=[null],w=[m,f,h],k=[m,!0],C=[m,!1],T=[w,y],O=[w,[f]],E="[".concat(m,"] ").concat(h);switch(f){case"subs_on":this.log.info("[".concat(m,"] This room is now in subscribers-only mode.")),this.emits(["subscriber","subscribers","_promiseSubscribers"],[k,k,y]);break;case"subs_off":this.log.info("[".concat(m,"] This room is no longer in subscribers-only mode.")),this.emits(["subscriber","subscribers","_promiseSubscribersoff"],[C,C,y]);break;case"emote_only_on":this.log.info("[".concat(m,"] This room is now in emote-only mode.")),this.emits(["emoteonly","_promiseEmoteonly"],[k,y]);break;case"emote_only_off":this.log.info("[".concat(m,"] This room is no longer in emote-only mode.")),this.emits(["emoteonly","_promiseEmoteonlyoff"],[C,y]);break;case"slow_on":case"slow_off":break;case"followers_on_zero":case"followers_on":case"followers_off":break;case"r9k_on":this.log.info("[".concat(m,"] This room is now in r9k mode.")),this.emits(["r9kmode","r9kbeta","_promiseR9kbeta"],[k,k,y]);break;case"r9k_off":this.log.info("[".concat(m,"] This room is no longer in r9k mode.")),this.emits(["r9kmode","r9kbeta","_promiseR9kbetaoff"],[C,C,y]);break;case"room_mods":var x=h.split(": "),x=(1<x.length?x[1]:"").toLowerCase().split(", ").filter(function(e){return e});this.emits(["_promiseMods","mods"],[[null,x],[m,x]]);break;case"no_mods":this.emits(["_promiseMods","mods"],[[null,[]],[m,[]]]);break;case"vips_success":var S=(h=h.endsWith(".")?h.slice(0,-1):h).split(": "),S=(1<S.length?S[1]:"").toLowerCase().split(", ").filter(function(e){return e});this.emits(["_promiseVips","vips"],[[null,S],[m,S]]);break;case"no_vips":this.emits(["_promiseVips","vips"],[[null,[]],[m,[]]]);break;case"already_banned":case"bad_ban_admin":case"bad_ban_anon":case"bad_ban_broadcaster":case"bad_ban_global_mod":case"bad_ban_mod":case"bad_ban_self":case"bad_ban_staff":case"usage_ban":this.log.info(E),this.emits(["notice","_promiseBan"],O);break;case"ban_success":this.log.info(E),this.emits(["notice","_promiseBan"],T);break;case"usage_clear":this.log.info(E),this.emits(["notice","_promiseClear"],O);break;case"usage_mods":this.log.info(E),this.emits(["notice","_promiseMods"],[w,[f,[]]]);break;case"mod_success":this.log.info(E),this.emits(["notice","_promiseMod"],T);break;case"usage_vips":this.log.info(E),this.emits(["notice","_promiseVips"],[w,[f,[]]]);break;case"usage_vip":case"bad_vip_grantee_banned":case"bad_vip_grantee_already_vip":case"bad_vip_max_vips_reached":case"bad_vip_achievement_incomplete":this.log.info(E),this.emits(["notice","_promiseVip"],[w,[f,[]]]);break;case"vip_success":this.log.info(E),this.emits(["notice","_promiseVip"],T);break;case"usage_mod":case"bad_mod_banned":case"bad_mod_mod":this.log.info(E),this.emits(["notice","_promiseMod"],O);break;case"unmod_success":this.log.info(E),this.emits(["notice","_promiseUnmod"],T);break;case"unvip_success":this.log.info(E),this.emits(["notice","_promiseUnvip"],T);break;case"usage_unmod":case"bad_unmod_mod":this.log.info(E),this.emits(["notice","_promiseUnmod"],O);break;case"usage_unvip":case"bad_unvip_grantee_not_vip":this.log.info(E),this.emits(["notice","_promiseUnvip"],O);break;case"color_changed":this.log.info(E),this.emits(["notice","_promiseColor"],T);break;case"usage_color":case"turbo_only_color":this.log.info(E),this.emits(["notice","_promiseColor"],O);break;case"commercial_success":this.log.info(E),this.emits(["notice","_promiseCommercial"],T);break;case"usage_commercial":case"bad_commercial_error":this.log.info(E),this.emits(["notice","_promiseCommercial"],O);break;case"hosts_remaining":this.log.info(E);S=isNaN(h[0])?0:parseInt(h[0]);this.emits(["notice","_promiseHost"],[w,[null,~~S]]);break;case"bad_host_hosting":case"bad_host_rate_exceeded":case"bad_host_error":case"usage_host":this.log.info(E),this.emits(["notice","_promiseHost"],[w,[f,null]]);break;case"already_r9k_on":case"usage_r9k_on":this.log.info(E),this.emits(["notice","_promiseR9kbeta"],O);break;case"already_r9k_off":case"usage_r9k_off":this.log.info(E),this.emits(["notice","_promiseR9kbetaoff"],O);break;case"timeout_success":this.log.info(E),this.emits(["notice","_promiseTimeout"],T);break;case"delete_message_success":this.log.info("[".concat(m," ").concat(h,"]")),this.emits(["notice","_promiseDeletemessage"],T);break;case"already_subs_off":case"usage_subs_off":this.log.info(E),this.emits(["notice","_promiseSubscribersoff"],O);break;case"already_subs_on":case"usage_subs_on":this.log.info(E),this.emits(["notice","_promiseSubscribers"],O);break;case"already_emote_only_off":case"usage_emote_only_off":this.log.info(E),this.emits(["notice","_promiseEmoteonlyoff"],O);break;case"already_emote_only_on":case"usage_emote_only_on":this.log.info(E),this.emits(["notice","_promiseEmoteonly"],O);break;case"usage_slow_on":this.log.info(E),this.emits(["notice","_promiseSlow"],O);break;case"usage_slow_off":this.log.info(E),this.emits(["notice","_promiseSlowoff"],O);break;case"usage_timeout":case"bad_timeout_admin":case"bad_timeout_anon":case"bad_timeout_broadcaster":case"bad_timeout_duration":case"bad_timeout_global_mod":case"bad_timeout_mod":case"bad_timeout_self":case"bad_timeout_staff":this.log.info(E),this.emits(["notice","_promiseTimeout"],O);break;case"untimeout_success":case"unban_success":this.log.info(E),this.emits(["notice","_promiseUnban"],T);break;case"usage_unban":case"bad_unban_no_ban":this.log.info(E),this.emits(["notice","_promiseUnban"],O);break;case"usage_delete":case"bad_delete_message_error":case"bad_delete_message_broadcaster":case"bad_delete_message_mod":this.log.info(E),this.emits(["notice","_promiseDeletemessage"],O);break;case"usage_unhost":case"not_hosting":this.log.info(E),this.emits(["notice","_promiseUnhost"],O);break;case"whisper_invalid_login":case"whisper_invalid_self":case"whisper_limit_per_min":case"whisper_limit_per_sec":case"whisper_restricted":case"whisper_restricted_recipient":this.log.info(E),this.emits(["notice","_promiseWhisper"],O);break;case"no_permission":case"msg_banned":case"msg_room_not_found":case"msg_channel_suspended":case"tos_ban":case"invalid_user":this.log.info(E),this.emits(["notice","_promiseBan","_promiseClear","_promiseUnban","_promiseTimeout","_promiseDeletemessage","_promiseMods","_promiseMod","_promiseUnmod","_promiseVips","_promiseVip","_promiseUnvip","_promiseCommercial","_promiseHost","_promiseUnhost","_promiseJoin","_promisePart","_promiseR9kbeta","_promiseR9kbetaoff","_promiseSlow","_promiseSlowoff","_promiseFollowers","_promiseFollowersoff","_promiseSubscribers","_promiseSubscribersoff","_promiseEmoteonly","_promiseEmoteonlyoff","_promiseWhisper"],[w,[f,m]]);break;case"msg_rejected":case"msg_rejected_mandatory":this.log.info(E),this.emit("automod",m,f,h);break;case"unrecognized_cmd":this.log.info(E),this.emit("notice",m,f,h);break;case"cmds_available":case"host_target_went_offline":case"msg_censored_broadcaster":case"msg_duplicate":case"msg_emoteonly":case"msg_verified_email":case"msg_ratelimit":case"msg_subsonly":case"msg_timedout":case"msg_bad_characters":case"msg_channel_blocked":case"msg_facebook":case"msg_followersonly":case"msg_followersonly_followed":case"msg_followersonly_zero":case"msg_slowmode":case"msg_suspended":case"no_help":case"usage_disconnect":case"usage_help":case"usage_me":case"unavailable_command":this.log.info(E),this.emit("notice",m,f,h);break;case"host_on":case"host_off":break;default:h.includes("Login unsuccessful")||h.includes("Login authentication failed")||h.includes("Error logging in")||h.includes("Improperly formatted auth")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason=h,this.log.error(this.reason),this.ws.close()):h.includes("Invalid NICK")?(this.wasCloseCalled=!1,this.reconnect=!1,this.reason="Invalid NICK.",this.log.error(this.reason),this.ws.close()):(this.log.warn("Could not parse NOTICE from tmi.twitch.tv:\n".concat(JSON.stringify(t,null,4))),this.emit("notice",m,f,h))}break;case"USERNOTICE":var L=p["display-name"]||p.login,g=p["msg-param-sub-plan"]||"",j=V.unescapeIRC(V.get(p["msg-param-sub-plan-name"],""))||null,P={prime:g.includes("Prime"),plan:g,planName:j},I=~~(p["msg-param-streak-months"]||0),N=p["msg-param-recipient-display-name"]||p["msg-param-recipient-user-name"],R=~~p["msg-param-mass-gift-count"];switch(p["message-type"]=f){case"resub":this.emits(["resub","subanniversary"],[[m,L,I,h,p,P]]);break;case"sub":this.emits(["subscription","sub"],[[m,L,P,h,p]]);break;case"subgift":this.emit("subgift",m,L,I,N,P,p);break;case"anonsubgift":this.emit("anonsubgift",m,I,N,P,p);break;case"submysterygift":this.emit("submysterygift",m,L,R,P,p);break;case"anonsubmysterygift":this.emit("anonsubmysterygift",m,R,P,p);break;case"primepaidupgrade":this.emit("primepaidupgrade",m,L,P,p);break;case"giftpaidupgrade":var A=p["msg-param-sender-name"]||p["msg-param-sender-login"];this.emit("giftpaidupgrade",m,L,A,p);break;case"anongiftpaidupgrade":this.emit("anongiftpaidupgrade",m,L,p);break;case"raid":var A=p["msg-param-displayName"]||p["msg-param-login"],M=+p["msg-param-viewerCount"];this.emit("raided",m,A,M,p);break;case"ritual":M=p["msg-param-ritual-name"];"new_chatter"===M?this.emit("newchatter",m,L,p,h):this.emit("ritual",M,m,L,p,h);break;default:this.emit("usernotice",f,m,p,h)}break;case"HOSTTARGET":var j=h.split(" "),D=~~j[1]||0;"-"===j[0]?(this.log.info("[".concat(m,"] Exited host mode.")),this.emits(["unhost","_promiseUnhost"],[[m,D],[null]])):(this.log.info("[".concat(m,"] Now hosting ").concat(j[0]," for ").concat(D," viewer(s).")),this.emit("hosting",m,j[0],D));break;case"CLEARCHAT":1<t.params.length?null===(o=V.get(t.tags["ban-duration"],null))?(this.log.info("[".concat(m,"] ").concat(h," has been banned.")),this.emit("ban",m,h,null,t.tags)):(this.log.info("[".concat(m,"] ").concat(h," has been timed out for ").concat(o," seconds.")),this.emit("timeout",m,h,null,~~o,t.tags)):(this.log.info("[".concat(m,"] Chat was cleared by a moderator.")),this.emits(["clearchat","_promiseClear"],[[m],[null]]));break;case"CLEARMSG":1<t.params.length&&(D=h,o=p.login,p["message-type"]="messagedeleted",this.log.info("[".concat(m,"] ").concat(o,"'s message has been deleted.")),this.emit("messagedeleted",m,o,D,p));break;case"RECONNECT":this.log.info("Received RECONNECT request from Twitch.."),this.log.info("Disconnecting and reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.disconnect().catch(function(e){return n.log.error(e)}),setTimeout(function(){return n.connect().catch(function(e){return n.log.error(e)})},this.reconnectTimer);break;case"USERSTATE":t.tags.username=this.username,"mod"===t.tags["user-type"]&&(this.moderators[m]||(this.moderators[m]=[]),this.moderators[m].includes(this.username)||this.moderators[m].push(this.username)),V.isJustinfan(this.getUsername())||this.userstate[m]||(this.userstate[m]=p,this.lastJoined=m,this.channels.push(m),this.log.info("Joined ".concat(m)),this.emit("join",m,V.username(this.getUsername()),!0)),t.tags["emote-sets"]!==this.emotes&&this._updateEmoteset(t.tags["emote-sets"]),this.userstate[m]=p;break;case"GLOBALUSERSTATE":this.globaluserstate=p,this.emit("globaluserstate",p),void 0!==t.tags["emote-sets"]&&this._updateEmoteset(t.tags["emote-sets"]);break;case"ROOMSTATE":V.channel(this.lastJoined)===m&&this.emit("_promiseJoin",null,m),t.tags.channel=m,this.emit("roomstate",m,t.tags),V.hasOwn(t.tags,"subs-only")||(V.hasOwn(t.tags,"slow")&&("boolean"!=typeof t.tags.slow||t.tags.slow?(i=[m,!0,~~t.tags.slow],this.log.info("[".concat(m,"] This room is now in slow mode.")),this.emits(["slow","slowmode","_promiseSlow"],[i,i,[null]])):(i=[m,!1,0],this.log.info("[".concat(m,"] This room is no longer in slow mode.")),this.emits(["slow","slowmode","_promiseSlowoff"],[i,i,[null]]))),V.hasOwn(t.tags,"followers-only")&&("-1"===t.tags["followers-only"]?(r=[m,!1,0],this.log.info("[".concat(m,"] This room is no longer in followers-only mode.")),this.emits(["followersonly","followersmode","_promiseFollowersoff"],[r,r,[null]])):(r=[m,!0,~~t.tags["followers-only"]],this.log.info("[".concat(m,"] This room is now in follower-only mode.")),this.emits(["followersonly","followersmode","_promiseFollowers"],[r,r,[null]]))));break;case"SERVERCHANGE":break;default:this.log.warn("Could not parse message from tmi.twitch.tv:\n".concat(JSON.stringify(t,null,4)))}else if("jtv"===t.prefix)"MODE"===t.command?"+o"===h?(this.moderators[m]||(this.moderators[m]=[]),this.moderators[m].includes(t.params[2])||this.moderators[m].push(t.params[2]),this.emit("mod",m,t.params[2])):"-o"===h&&(this.moderators[m]||(this.moderators[m]=[]),this.moderators[m].filter(function(e){return e!==t.params[2]}),this.emit("unmod",m,t.params[2])):this.log.warn("Could not parse message from jtv:\n".concat(JSON.stringify(t,null,4)));else switch(t.command){case"353":this.emit("names",t.params[2],t.params[3].split(" "));break;case"366":break;case"JOIN":var U=t.prefix.split("!")[0];V.isJustinfan(this.getUsername())&&this.username===U&&(this.lastJoined=m,this.channels.push(m),this.log.info("Joined ".concat(m)),this.emit("join",m,U,!0)),this.username!==U&&this.emit("join",m,U,!1);break;case"PART":var J=!1,G=t.prefix.split("!")[0];this.username===G&&(J=!0,this.userstate[m]&&delete this.userstate[m],-1!==(U=this.channels.indexOf(m))&&this.channels.splice(U,1),-1!==(U=this.opts.channels.indexOf(m))&&this.opts.channels.splice(U,1),this.log.info("Left ".concat(m)),this.emit("_promisePart",null)),this.emit("part",m,G,J);break;case"WHISPER":J=t.prefix.split("!")[0];this.log.info("[WHISPER] <".concat(J,">: ").concat(h)),V.hasOwn(t.tags,"username")||(t.tags.username=J),t.tags["message-type"]="whisper";J=V.channel(t.tags.username);this.emits(["whisper","message"],[[J,t.tags,h,!1]]);break;case"PRIVMSG":t.tags.username=t.prefix.split("!")[0],"jtv"===t.tags.username?(c=V.username(h.split(" ")[0]),u=h.includes("auto"),h.includes("hosting you for")?(a=V.extractNumber(h),this.emit("hosted",m,c,a,u)):h.includes("hosting you")&&this.emit("hosted",m,c,0,u)):(a=V.get(this.opts.options.messagesLogLevel,"info"),c=V.actionMessage(h),t.tags["message-type"]=c?"action":"chat",h=c?c[1]:h,V.hasOwn(t.tags,"bits")?this.emit("cheer",m,t.tags,h):(V.hasOwn(t.tags,"msg-id")?"highlighted-message"===t.tags["msg-id"]?(u=t.tags["msg-id"],this.emit("redeem",m,t.tags.username,u,t.tags,h)):"skip-subs-mode-message"===t.tags["msg-id"]&&(l=t.tags["msg-id"],this.emit("redeem",m,t.tags.username,l,t.tags,h)):V.hasOwn(t.tags,"custom-reward-id")&&(l=t.tags["custom-reward-id"],this.emit("redeem",m,t.tags.username,l,t.tags,h)),c?(this.log[a]("[".concat(m,"] *<").concat(t.tags.username,">: ").concat(h)),this.emits(["action","message"],[[m,t.tags,h,!1]])):(this.log[a]("[".concat(m,"] <").concat(t.tags.username,">: ").concat(h)),this.emits(["chat","message"],[[m,t.tags,h,!1]]))));break;default:this.log.warn("Could not parse message:\n".concat(JSON.stringify(t,null,4)))}}},n.prototype.connect=function(){var s=this;return new Promise(function(t,n){s.server=V.get(s.opts.connection.server,"irc-ws.chat.twitch.tv"),s.port=V.get(s.opts.connection.port,80),s.secure&&(s.port=443),443===s.port&&(s.secure=!0),s.reconnectTimer=s.reconnectTimer*s.reconnectDecay,s.reconnectTimer>=s.maxReconnectInterval&&(s.reconnectTimer=s.maxReconnectInterval),s._openConnection(),s.once("_promiseConnect",function(e){e?n(e):t([s.server,~~s.port])})})},n.prototype._openConnection=function(){var e="".concat(this.secure?"wss":"ws","://").concat(this.server,":").concat(this.port,"/"),t={};"agent"in this.opts.connection&&(t.agent=this.opts.connection.agent),this.ws=new r(e,"irc",t),this.ws.onmessage=this._onMessage.bind(this),this.ws.onerror=this._onError.bind(this),this.ws.onclose=this._onClose.bind(this),this.ws.onopen=this._onOpen.bind(this)},n.prototype._onOpen=function(){var n=this;this._isConnected()&&(this.log.info("Connecting to ".concat(this.server," on port ").concat(this.port,"..")),this.emit("connecting",this.server,~~this.port),this.username=V.get(this.opts.identity.username,V.justinfan()),this._getToken().then(function(e){var t=V.password(e);n.log.info("Sending authentication to server.."),n.emit("logon");e="twitch.tv/tags twitch.tv/commands";n._skipMembership||(e+=" twitch.tv/membership"),n.ws.send("CAP REQ :"+e),t?n.ws.send("PASS ".concat(t)):V.isJustinfan(n.username)&&n.ws.send("PASS SCHMOOPIIE"),n.ws.send("NICK ".concat(n.username))}).catch(function(e){n.emits(["_promiseConnect","disconnected"],[[e],["Could not get a token."]])}))},n.prototype._getToken=function(){var e,t=this.opts.identity.password;return"function"==typeof t?(e=t())instanceof Promise?e:Promise.resolve(e):Promise.resolve(t)},n.prototype._onMessage=function(e){var t=this;e.data.trim().split("\r\n").forEach(function(e){e=q.msg(e);e&&t.handleMessage(e)})},n.prototype._onError=function(){var t=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.reason=null===this.ws?"Connection closed.":"Unable to connect.",this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.emit("reconnect"),setTimeout(function(){t.reconnecting=!1,t.connect().catch(function(e){return t.log.error(e)})},this.reconnectTimer)),this.ws=null},n.prototype._onClose=function(){var t=this;this.moderators={},this.userstate={},this.globaluserstate={},clearInterval(this.pingLoop),clearTimeout(this.pingTimeout),clearTimeout(this._updateEmotesetsTimer),this.wasCloseCalled?(this.wasCloseCalled=!1,this.reason="Connection closed.",this.log.info(this.reason),this.emits(["_promiseConnect","_promiseDisconnect","disconnected"],[[this.reason],[null],[this.reason]])):(this.emits(["_promiseConnect","disconnected"],[[this.reason]]),this.reconnect&&this.reconnections===this.maxReconnectAttempts&&(this.emit("maxreconnect"),this.log.error("Maximum reconnection attempts reached.")),this.reconnect&&!this.reconnecting&&this.reconnections<=this.maxReconnectAttempts-1&&(this.reconnecting=!0,this.reconnections=this.reconnections+1,this.log.error("Could not connect to server. Reconnecting in ".concat(Math.round(this.reconnectTimer/1e3)," seconds..")),this.emit("reconnect"),setTimeout(function(){t.reconnecting=!1,t.connect().catch(function(e){return t.log.error(e)})},this.reconnectTimer))),this.ws=null},n.prototype._getPromiseDelay=function(){return this.currentLatency<=600?600:this.currentLatency+100},n.prototype._sendCommand=function(s,o,i,r){var a=this;return new Promise(function(e,t){if(!a._isConnected())return t("Not connected to server.");var n;null!==s&&"number"!=typeof s||(null===s&&(s=a._getPromiseDelay()),V.promiseDelay(s).then(function(){return t("No response from Twitch.")})),null!==o?(n=V.channel(o),a.log.info("[".concat(n,"] Executing command: ").concat(i)),a.ws.send("PRIVMSG ".concat(n," :").concat(i))):(a.log.info("Executing command: ".concat(i)),a.ws.send(i)),"function"==typeof r?r(e,t):e()})},n.prototype._sendMessage=function(c,u,l,m){var h=this;return new Promise(function(e,t){if(!h._isConnected())return t("Not connected to server.");if(V.isJustinfan(h.getUsername()))return t("Cannot send anonymous messages.");var n,s=V.channel(u);h.userstate[s]||(h.userstate[s]={}),500<=l.length&&(n=V.splitLine(l,500),l=n[0],setTimeout(function(){h._sendMessage(c,u,n[1],function(){})},350)),h.ws.send("PRIVMSG ".concat(s," :").concat(l));var o={};Object.keys(h.emotesets).forEach(function(e){return h.emotesets[e].forEach(function(e){return(V.isRegex(e.code)?q.emoteRegex:q.emoteString)(l,e.code,e.id,o)})});var i=Object.assign(h.userstate[s],q.emotes({emotes:q.transformEmotes(o)||null})),r=V.get(h.opts.options.messagesLogLevel,"info"),a=V.actionMessage(l);a?(i["message-type"]="action",h.log[r]("[".concat(s,"] *<").concat(h.getUsername(),">: ").concat(a[1])),h.emits(["action","message"],[[s,i,a[1],!0]])):(i["message-type"]="chat",h.log[r]("[".concat(s,"] <").concat(h.getUsername(),">: ").concat(l)),h.emits(["chat","message"],[[s,i,l,!0]])),"function"==typeof m?m(e,t):e()})},n.prototype._updateEmoteset=function(s){var t,o=this,e=void 0!==s;e&&(s===this.emotes?e=!1:this.emotes=s),this._skipUpdatingEmotesets?e&&this.emit("emotesets",s,{}):(t=function(){0<o._updateEmotesetsTimerDelay&&(clearTimeout(o._updateEmotesetsTimer),o._updateEmotesetsTimer=setTimeout(function(){return o._updateEmoteset(s)},o._updateEmotesetsTimerDelay))},this._getToken().then(function(e){var t="https://api.twitch.tv/kraken/chat/emoticon_images?emotesets=".concat(s),n={};return"fetchAgent"in o.opts.connection&&(n.agent=o.opts.connection.fetchAgent),a(t,i(i({},n),{},{headers:{Accept:"application/vnd.twitchtv.v5+json",Authorization:"OAuth ".concat(V.token(e)),"Client-ID":o.clientId}}))}).then(function(e){return e.json()}).then(function(e){o.emotesets=e.emoticon_sets||{},o.emit("emotesets",s,o.emotesets),t()}).catch(t))},n.prototype.getUsername=function(){return this.username},n.prototype.getOptions=function(){return this.opts},n.prototype.getChannels=function(){return this.channels},n.prototype.isMod=function(e,t){e=V.channel(e);return this.moderators[e]||(this.moderators[e]=[]),this.moderators[e].includes(V.username(t))},n.prototype.readyState=function(){return null===this.ws?"CLOSED":["CONNECTING","OPEN","CLOSING","CLOSED"][this.ws.readyState]},n.prototype._isConnected=function(){return null!==this.ws&&1===this.ws.readyState},n.prototype.disconnect=function(){var n=this;return new Promise(function(e,t){null!==n.ws&&3!==n.ws.readyState?(n.wasCloseCalled=!0,n.log.info("Disconnecting from server.."),n.ws.close(),n.once("_promiseDisconnect",function(){return e([n.server,~~n.port])})):(n.log.error("Cannot disconnect from server. Socket is not opened or connection is already closing."),t("Cannot disconnect from server. Socket is not opened or connection is already closing."))})},n.prototype.off=n.prototype.removeListener,void 0!==d&&d.exports&&(d.exports=n),"undefined"!=typeof window&&(window.tmi={client:n,Client:n})}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./api":2,"./commands":4,"./events":5,"./logger":6,"./parser":7,"./timer":8,"./utils":9,"node-fetch":10,ws:10}],4:[function(e,t,n){"use strict";var u=e("./utils");function s(s,o){var e=this;return s=u.channel(s),o=u.get(o,30),this._sendCommand(null,s,"/followers ".concat(o),function(t,n){e.once("_promiseFollowers",function(e){e?n(e):t([s,~~o])})})}function o(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/followersoff",function(t,n){e.once("_promiseFollowersoff",function(e){e?n(e):t([s])})})}function i(s){var e=this;return s=u.channel(s),this._sendCommand(null,null,"PART ".concat(s),function(t,n){e.once("_promisePart",function(e){e?n(e):t([s])})})}function r(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/r9kbeta",function(t,n){e.once("_promiseR9kbeta",function(e){e?n(e):t([s])})})}function a(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/r9kbetaoff",function(t,n){e.once("_promiseR9kbetaoff",function(e){e?n(e):t([s])})})}function c(s,o){var e=this;return s=u.channel(s),o=u.get(o,300),this._sendCommand(null,s,"/slow ".concat(o),function(t,n){e.once("_promiseSlow",function(e){e?n(e):t([s,~~o])})})}function l(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/slowoff",function(t,n){e.once("_promiseSlowoff",function(e){e?n(e):t([s])})})}t.exports={action:function(n,s){return n=u.channel(n),s="ACTION ".concat(s,""),this._sendMessage(this._getPromiseDelay(),n,s,function(e,t){e([n,s])})},ban:function(s,o,i){var e=this;return s=u.channel(s),o=u.username(o),i=u.get(i,""),this._sendCommand(null,s,"/ban ".concat(o," ").concat(i),function(t,n){e.once("_promiseBan",function(e){e?n(e):t([s,o,i])})})},clear:function(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/clear",function(t,n){e.once("_promiseClear",function(e){e?n(e):t([s])})})},color:function(e,s){var o=this;return s=u.get(s,e),this._sendCommand(null,"#tmijs","/color ".concat(s),function(t,n){o.once("_promiseColor",function(e){e?n(e):t([s])})})},commercial:function(s,o){var e=this;return s=u.channel(s),o=u.get(o,30),this._sendCommand(null,s,"/commercial ".concat(o),function(t,n){e.once("_promiseCommercial",function(e){e?n(e):t([s,~~o])})})},deletemessage:function(s,e){var o=this;return s=u.channel(s),this._sendCommand(null,s,"/delete ".concat(e),function(t,n){o.once("_promiseDeletemessage",function(e){e?n(e):t([s])})})},emoteonly:function(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/emoteonly",function(t,n){e.once("_promiseEmoteonly",function(e){e?n(e):t([s])})})},emoteonlyoff:function(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/emoteonlyoff",function(t,n){e.once("_promiseEmoteonlyoff",function(e){e?n(e):t([s])})})},followersonly:s,followersmode:s,followersonlyoff:o,followersmodeoff:o,host:function(o,i){var e=this;return o=u.channel(o),i=u.username(i),this._sendCommand(2e3,o,"/host ".concat(i),function(n,s){e.once("_promiseHost",function(e,t){e?s(e):n([o,i,~~t])})})},join:function(a){var c=this;return a=u.channel(a),this._sendCommand(void 0,null,"JOIN ".concat(a),function(s,o){var i="_promiseJoin",r=!1,e=function e(t,n){a===u.channel(n)&&(c.removeListener(i,e),r=!0,t?o(t):s([a]))};c.on(i,e);e=c._getPromiseDelay();u.promiseDelay(e).then(function(){r||c.emit(i,"No response from Twitch.",a)})})},mod:function(s,o){var e=this;return s=u.channel(s),o=u.username(o),this._sendCommand(null,s,"/mod ".concat(o),function(t,n){e.once("_promiseMod",function(e){e?n(e):t([s,o])})})},mods:function(o){var i=this;return o=u.channel(o),this._sendCommand(null,o,"/mods",function(n,s){i.once("_promiseMods",function(e,t){e?s(e):(t.forEach(function(e){i.moderators[o]||(i.moderators[o]=[]),i.moderators[o].includes(e)||i.moderators[o].push(e)}),n(t))})})},part:i,leave:i,ping:function(){var n=this;return this._sendCommand(null,null,"PING",function(t,e){n.latency=new Date,n.pingTimeout=setTimeout(function(){null!==n.ws&&(n.wasCloseCalled=!1,n.log.error("Ping timeout."),n.ws.close(),clearInterval(n.pingLoop),clearTimeout(n.pingTimeout))},u.get(n.opts.connection.timeout,9999)),n.once("_promisePing",function(e){return t([parseFloat(e)])})})},r9kbeta:r,r9kmode:r,r9kbetaoff:a,r9kmodeoff:a,raw:function(n){return this._sendCommand(null,null,n,function(e,t){e([n])})},say:function(n,s){return n=u.channel(n),s.startsWith(".")&&!s.startsWith("..")||s.startsWith("/")||s.startsWith("\\")?"me "===s.substr(1,3)?this.action(n,s.substr(4)):this._sendCommand(null,n,s,function(e,t){e([n,s])}):this._sendMessage(this._getPromiseDelay(),n,s,function(e,t){e([n,s])})},slow:c,slowmode:c,slowoff:l,slowmodeoff:l,subscribers:function(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/subscribers",function(t,n){e.once("_promiseSubscribers",function(e){e?n(e):t([s])})})},subscribersoff:function(s){var e=this;return s=u.channel(s),this._sendCommand(null,s,"/subscribersoff",function(t,n){e.once("_promiseSubscribersoff",function(e){e?n(e):t([s])})})},timeout:function(s,o,i,r){var e=this;return s=u.channel(s),o=u.username(o),null===i||u.isInteger(i)||(r=i,i=300),i=u.get(i,300),r=u.get(r,""),this._sendCommand(null,s,"/timeout ".concat(o," ").concat(i," ").concat(r),function(t,n){e.once("_promiseTimeout",function(e){e?n(e):t([s,o,~~i,r])})})},unban:function(s,o){var e=this;return s=u.channel(s),o=u.username(o),this._sendCommand(null,s,"/unban ".concat(o),function(t,n){e.once("_promiseUnban",function(e){e?n(e):t([s,o])})})},unhost:function(s){var e=this;return s=u.channel(s),this._sendCommand(2e3,s,"/unhost",function(t,n){e.once("_promiseUnhost",function(e){e?n(e):t([s])})})},unmod:function(s,o){var e=this;return s=u.channel(s),o=u.username(o),this._sendCommand(null,s,"/unmod ".concat(o),function(t,n){e.once("_promiseUnmod",function(e){e?n(e):t([s,o])})})},unvip:function(s,o){var e=this;return s=u.channel(s),o=u.username(o),this._sendCommand(null,s,"/unvip ".concat(o),function(t,n){e.once("_promiseUnvip",function(e){e?n(e):t([s,o])})})},vip:function(s,o){var e=this;return s=u.channel(s),o=u.username(o),this._sendCommand(null,s,"/vip ".concat(o),function(t,n){e.once("_promiseVip",function(e){e?n(e):t([s,o])})})},vips:function(e){var t=this;return e=u.channel(e),this._sendCommand(null,e,"/vips",function(n,s){t.once("_promiseVips",function(e,t){e?s(e):n(t)})})},whisper:function(n,s){var o=this;return(n=u.username(n))===this.getUsername()?Promise.reject("Cannot send a whisper to the same account."):this._sendCommand(null,"#tmijs","/w ".concat(n," ").concat(s),function(e,t){o.once("_promiseWhisper",function(e){e&&t(e)})}).catch(function(e){if(e&&"string"==typeof e&&0!==e.indexOf("No response from Twitch."))throw e;var t=u.channel(n),e=Object.assign({"message-type":"whisper","message-id":null,"thread-id":null,username:o.getUsername()},o.globaluserstate);return o.emits(["whisper","message"],[[t,e,s,!0],[t,e,s,!0]]),[n,s]})}}},{"./utils":9}],5:[function(e,t,n){"use strict";function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function c(e){return"function"==typeof e}function u(e){return"object"===s(e)&&null!==e}function a(e){return void 0===e}((t.exports=o).EventEmitter=o).prototype._events=void 0,o.prototype._maxListeners=void 0,o.defaultMaxListeners=10,o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},o.prototype.emit=function(e){var t,n,s,o,i,r;if(this._events||(this._events={}),"error"===e&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(a(n=this._events[e]))return!1;if(c(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(u(n))for(o=Array.prototype.slice.call(arguments,1),s=(r=n.slice()).length,i=0;i<s;i++)r[i].apply(this,o);return!0},o.prototype.on=o.prototype.addListener=function(e,t){var n;if(!c(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,c(t.listener)?t.listener:t),this._events[e]?u(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,u(this._events[e])&&!this._events[e].warned&&(n=a(this._maxListeners)?o.defaultMaxListeners:this._maxListeners)&&0<n&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace()),this},o.prototype.once=function(e,t){if(!c(t))throw TypeError("listener must be a function");var n=!1;if(this._events.hasOwnProperty(e)&&"_"===e.charAt(0)){var s,o=1,i=e;for(s in this._events)this._events.hasOwnProperty(s)&&s.startsWith(i)&&o++;e+=o}function r(){"_"!==e.charAt(0)||isNaN(e.substr(e.length-1))||(e=e.substring(0,e.length-1)),this.removeListener(e,r),n||(n=!0,t.apply(this,arguments))}return r.listener=t,this.on(e,r),this},o.prototype.removeListener=function(e,t){var n,s,o,i;if(!c(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(o=(n=this._events[e]).length,s=-1,n===t||c(n.listener)&&n.listener===t){if(delete this._events[e],this._events.hasOwnProperty(e+"2")&&"_"===e.charAt(0)){var r,a=e;for(r in this._events)this._events.hasOwnProperty(r)&&r.startsWith(a)&&(isNaN(parseInt(r.substr(r.length-1)))||(this._events[e+parseInt(r.substr(r.length-1)-1)]=this._events[r],delete this._events[r]));this._events[e]=this._events[e+"1"],delete this._events[e+"1"]}this._events.removeListener&&this.emit("removeListener",e,t)}else if(u(n)){for(i=o;0<i--;)if(n[i]===t||n[i].listener&&n[i].listener===t){s=i;break}if(s<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},o.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(c(n=this._events[e]))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},o.prototype.listeners=function(e){e=this._events&&this._events[e]?c(this._events[e])?[this._events[e]]:this._events[e].slice():[];return e},o.prototype.listenerCount=function(e){if(this._events){e=this._events[e];if(c(e))return 1;if(e)return e.length}return 0},o.listenerCount=function(e,t){return e.listenerCount(t)}},{}],6:[function(e,t,n){"use strict";var s=e("./utils"),o="info",i={trace:0,debug:1,info:2,warn:3,error:4,fatal:5};function r(t){return function(e){i[o]<=i[t]&&console.log("[".concat(s.formatDate(new Date),"] ").concat(t,": ").concat(e))}}t.exports={setLevel:function(e){o=e},trace:r("trace"),debug:r("debug"),info:r("info"),warn:r("warn"),error:r("error"),fatal:r("fatal")}},{"./utils":9}],7:[function(e,t,n){"use strict";var r=e("./utils"),a=/\S+/g;function s(e,t,n,s,o){var n=2<arguments.length&&void 0!==n?n:",",i=3<arguments.length&&void 0!==s?s:"/",r=4<arguments.length?o:void 0,s=e[t];if(void 0===s)return e;o="string"==typeof s;if(e[t+"-raw"]=o?s:null,!0===s)return e[t]=null,e;if(e[t]={},o)for(var a=s.split(n),c=0;c<a.length;c++){var u=a[c].split(i),l=u[1];void 0!==r&&l&&(l=l.split(r)),e[t][u[0]]=l||null}return e}t.exports={badges:function(e){return s(e,"badges")},badgeInfo:function(e){return s(e,"badge-info")},emotes:function(e){return s(e,"emotes","/",":",",")},emoteRegex:function(e,t,n,s){a.lastIndex=0;for(var o,i=new RegExp("(\\b|^|\\s)"+r.unescapeHtml(t)+"(\\b|$|\\s)");null!==(o=a.exec(e));)i.test(o[0])&&(s[n]=s[n]||[],s[n].push([o.index,a.lastIndex-1]))},emoteString:function(e,t,n,s){var o;for(a.lastIndex=0;null!==(o=a.exec(e));)o[0]===r.unescapeHtml(t)&&(s[n]=s[n]||[],s[n].push([o.index,a.lastIndex-1]))},transformEmotes:function(t){var n="";return Object.keys(t).forEach(function(e){n="".concat(n+e,":"),t[e].forEach(function(e){return n="".concat(n+e.join("-"),",")}),n="".concat(n.slice(0,-1),"/")}),n.slice(0,-1)},formTags:function(e){var t,n=[];for(t in e){var s=r.escapeIRC(e[t]);n.push("".concat(t,"=").concat(s))}return"@".concat(n.join(";"))},msg:function(e){var t={raw:e,tags:{},prefix:null,command:null,params:[]},n=0,s=0;if(64===e.charCodeAt(0)){if(-1===(s=e.indexOf(" ")))return null;for(var o=e.slice(1,s).split(";"),i=0;i<o.length;i++){var r=o[i],a=r.split("=");t.tags[a[0]]=r.substring(r.indexOf("=")+1)||!0}n=s+1}for(;32===e.charCodeAt(n);)n++;if(58===e.charCodeAt(n)){if(-1===(s=e.indexOf(" ",n)))return null;for(t.prefix=e.slice(n+1,s),n=s+1;32===e.charCodeAt(n);)n++}if(-1===(s=e.indexOf(" ",n)))return e.length>n?(t.command=e.slice(n),t):null;for(t.command=e.slice(n,s),n=s+1;32===e.charCodeAt(n);)n++;for(;n<e.length;){if(s=e.indexOf(" ",n),58===e.charCodeAt(n)){t.params.push(e.slice(n+1));break}if(-1===s){if(-1===s){t.params.push(e.slice(n));break}}else for(t.params.push(e.slice(n,s)),n=s+1;32===e.charCodeAt(n);)n++}return t}}},{"./utils":9}],8:[function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}t.exports=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.queue=[],this.index=0,this.defaultDelay=void 0===e?3e3:e}var e,n,s;return e=t,(n=[{key:"add",value:function(e,t){this.queue.push({fn:e,delay:t})}},{key:"next",value:function(){var e,t=this,n=this.index++,n=this.queue[n];n&&(e=this.queue[this.index],n.fn(),e&&(n=void 0===e.delay?this.defaultDelay:e.delay,setTimeout(function(){return t.next()},n)))}}])&&o(e.prototype,n),s&&o(e,s),t}()},{}],9:[function(e,f,t){!function(h){!function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var n,s=/^\u0001ACTION ([^\u0001]+)\u0001$/,o=/^(justinfan)(\d+$)/,i=/\\([sn:r\\])/g,r=/([ \n;\r\\])/g,a={s:" ",n:"",":":";",r:""},c={" ":"s","\n":"n",";":":","\r":"r"},u=new RegExp("^(?:(?:https?|ftp)://)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))\\.?)(?::\\d{2,5})?(?:[/?#]\\S*)?$","i"),l=/[|\\^$*+?:#]/,m=f.exports={get:function(e,t){return void 0===e?t:e},hasOwn:function(e,t){return{}.hasOwnProperty.call(e,t)},promiseDelay:function(t){return new Promise(function(e){return setTimeout(e,t)})},isFinite:(n=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},e.toString=function(){return n.toString()},e),toNumber:function(e,t){if(null===e)return 0;t=Math.pow(10,m.isFinite(t)?t:0);return Math.round(e*t)/t},isInteger:function(e){return!isNaN(m.toNumber(e,0))},isRegex:function(e){return l.test(e)},isURL:function(e){return u.test(e)},justinfan:function(){return"justinfan".concat(Math.floor(8e4*Math.random()+1e3))},isJustinfan:function(e){return o.test(e)},channel:function(e){var t;return"#"===(t=(e||"").toLowerCase())[0]?t:"#"+t},username:function(e){var t;return"#"===(t=(e||"").toLowerCase())[0]?t.slice(1):t},token:function(e){return e?e.toLowerCase().replace("oauth:",""):""},password:function(e){e=m.token(e);return e?"oauth:".concat(e):""},actionMessage:function(e){return e.match(s)},replaceAll:function(e,t){if(null==e)return null;for(var n in t)e=e.replace(new RegExp(n,"g"),t[n]);return e},unescapeHtml:function(e){return e.replace(/\\&amp\\;/g,"&").replace(/\\&lt\\;/g,"<").replace(/\\&gt\\;/g,">").replace(/\\&quot\\;/g,'"').replace(/\\&#039\\;/g,"'")},unescapeIRC:function(e){return e&&"string"==typeof e&&e.includes("\\")?e.replace(i,function(e,t){return t in a?a[t]:t}):e},escapeIRC:function(e){return e&&"string"==typeof e?e.replace(r,function(e,t){return t in c?"\\".concat(c[t]):t}):e},addWord:function(e,t){return e.length?e+" "+t:e+t},splitLine:function(e,t){var n=e.substring(0,t).lastIndexOf(" ");return[e.substring(0,n=-1===n?t-1:n),e.substring(n+1)]},extractNumber:function(e){for(var t=e.split(" "),n=0;n<t.length;n++)if(m.isInteger(t[n]))return~~t[n];return 0},formatDate:function(e){var t=e.getHours(),e=((e=e.getMinutes())<10?"0":"")+e;return"".concat(t=(t<10?"0":"")+t,":").concat(e)},inherits:function(e,t){e.super_=t;function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e},isNode:function(){try{return"object"===(void 0===h?"undefined":t(h))&&"[object process]"===Object.prototype.toString.call(h)}catch(e){}return!1}};function e(e){return n.apply(this,arguments)}}.call(this)}.call(this,e("_process"))},{_process:11}],10:[function(e,t,n){},{}],11:[function(e,t,n){var s,o,t=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(s===setTimeout)return setTimeout(t,0);if((s===i||!s)&&setTimeout)return s=setTimeout,setTimeout(t,0);try{return s(t,0)}catch(e){try{return s.call(null,t,0)}catch(e){return s.call(this,t,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:i}catch(e){s=i}try{o="function"==typeof clearTimeout?clearTimeout:r}catch(e){o=r}}();var c,u=[],l=!1,m=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):m=-1,u.length&&f())}function f(){if(!l){var e=a(h);l=!0;for(var t=u.length;t;){for(c=u,u=[];++m<t;)c&&c[m].run();m=-1,t=u.length}c=null,l=!1,function(t){if(o===clearTimeout)return clearTimeout(t);if((o===r||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(t);try{o(t)}catch(e){try{return o.call(null,t)}catch(e){return o.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function d(){}t.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=d,t.addListener=d,t.once=d,t.off=d,t.removeListener=d,t.removeAllListeners=d,t.emit=d,t.prependListener=d,t.prependOnceListener=d,t.listeners=function(e){return[]},t.binding=function(e){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(e){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}]},{},[1]);

            function Hex2DecF(HexVal) {
                hexChars = '0123456789ABCDEF';
                HexVal = HexVal.toUpperCase();
                DecVal = 0;
                temp = HexVal.substring(0,1);
                DecVal = (hexChars.indexOf(temp) * 16);
                temp = HexVal.substring(1);
                DecVal += hexChars.indexOf(temp);
                return DecVal;
            }

            function hex2dec(str) {
                r = 0;
                n = str.length / 2;
                for(i = 0; i < n; i++) {
                    x = n - 1 - i;
                    c = Hex2DecF(str.substring(i * 2, i * 2 + 2))*Math.pow(256, x);
                    r += c;
                }
                return r;
            }

            function dec2hex(num) {
                num = num * 255;
                var res = num.toString(16);
                res = res.slice(0, res.indexOf('.'));
                if (num === 0) {
                    res = '00';
                } else if (num < 16) {
                    res = '0' + res;
                } else if (num >= 16 && res.length === 1) {
                    res = res + res;
                }
                return res;
            }

            var client,
                channelList = [ 'KANAL' ],
                userColorOpacity = 0.4,
                chatFlow = 'runter',
                chatSpace = 10,
                chatBgColor = 'transparent',
                chatBgColorOpacity = 0.5,
                chatBgGradient = ['0', 'linear', '180deg', '#00000080', 'transparent'],
                chatBorderRadius = [0, 0, 0, 0],
                chatPadding = [0, 0, 0, 0],
                messageMoveTime = 200,
                messageDelay = 0,
                messageRemoveTime = 15000,
                usernameSize = 'inhalt',
                usernamePosition = 'links',
                usernameAlign = 'links',
                usernameBgColor = 'twitch-transparent',
                usernameBgGradient = ['0', 'linear', '180deg', '#00000080', 'transparent'],
                usernameColor = '#ffffff',
                usernameFontFamily = "Arial",
                usernameFontSize = 16,
                usernamePadding = [10, 10, 10, 10],
                usernameBorderRadius = [10, 10, 10, 10],
                messageSize = 'voll',
                messagePosition = 'links',
                messageAlign = 'links',
                messageBgColor = '#00000066',
                messageBgGradient = ['0', 'linear', '180deg', '#00000080', 'transparent'],
                messageColor = '#ffffff',
                messageFontFamily = "Arial",
                messageFontSize = 16,
                messagePadding = [10, 10, 10, 10],
                messageBorderRadius = [10, 10, 10, 10],
                previewWidth = 400,
                previewHeight = 600,
                previewBg = 'url("Hintergrund/Hintergrund1.svg")';
            
        </script>
        <title>Twitch Chat</title>
    </head>
    <body id="Body">
        <nav>
            <section class="navCat">
                <h2 class="navTitle">GENERELL</h2>
                
                <section class="navSetting">
                    <p class="navDescr">Twitch-Kanal</p>
                    <input type="text" class="navTextbox" value="KANAL" id="ChannelTextbox">
                    <input type="button" class="navTextboxSubmit submitYes" value="Verbinden" onclick="connectChannel()">
                    <input type="button" class="navTextboxSubmit submitNo" value="Trennen" onclick="disconnectChannel()">
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Transparenz für "Twitch-Transparent"</p>
                    <div class="navSelectionGroup">
                        <p class="navRangeVal" id="TwitchTransparentValue">0.4</p>
                        <input type="range" value="0.4" min="0" max="1" step="0.01" oninput="document.getElementById('TwitchTransparentValue').innerHTML = this.value; userColorOpacity = this.value;">
                    </div>
                </section>

            </section>
            <section class="navCat">
                <h2 class="navTitle">DESIGN</h2>
                
                <section class="navSetting">
                    <p class="navDescr">Chat Richtung</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="chatDirButton" onclick="chatFlow = 'hoch'; document.body.setAttribute('data-flow', chatFlow); repositionMessages()" data-active="false">⬆️</button>
                        <button class="navRadioButton" name="chatDirButton" onclick="chatFlow = 'runter'; document.body.setAttribute('data-flow', chatFlow); repositionMessages()" data-active="true">⬇️</button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Nachrichten-Abstand</p>
                    <div class="navSelectionGroup">
                        <input type="number" class="navNumber" value="10" oninput="chatSpace = this.value; document.body.style.setProperty('--message-space', chatSpace + 'px'); repositionMessages()"><p class="navNumberUnit">px</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Hintergrundfarbe</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="chatBgColorButton" onclick="chatBgColor = 'deaktiviert'; changeChatBgColor();" data-active="true"></button>
                        <button class="navRadioButton" name="chatBgColorButton" onclick="chatBgColor = 'twitch'; changeChatBgColor();" data-active="false"><img src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="chatBgColorButton" onclick="chatBgColor = 'twitch-transparent'; changeChatBgColor();" data-active="false"><img style="opacity:0.5" src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="chatBgColorButton" onclick="chatBgColor = document.getElementById('ChatBgColorPicker').value + dec2hex(document.getElementById('ChatBgColorOpacitySlider').value); changeChatBgColor();" data-active="false"><input type="color" class="navColor" value="#ffffff" id="ChatBgColorPicker" oninput="chatBgColor = this.value + dec2hex(document.getElementById('ChatBgColorOpacitySlider').value); changeChatBgColor();"><input type="range" min="0" max="1" step="0.01" value="0.5" id="ChatBgColorOpacitySlider" oninput="chatBgColor = document.getElementById('ChatBgColorPicker').value + dec2hex(this.value); changeChatBgColor()"></button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Hintergrundverlauf</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="chatBgGradientButton" onclick="chatBgGradient[0] = '0'; changeChatBgGradientColor();" data-active="true"></button>
                        <button class="navRadioButton" name="chatBgGradientButton" onclick="chatBgGradient[0] = '1'; chatBgGradient[1] = 'linear'; changeChatBgGradientColor();" data-active="false"><div style="width:25px; height:25px; margin-right:5px; background-image:linear-gradient(90deg, #f58080, #cf2929); border-radius:3px;"></div><input type="number" class="navNumber" value="180" oninput="chatBgGradient[2] = this.value + 'deg'; changeChatBgGradientColor();"><p class="navNumberUnit">°</p></button>
                        <button class="navRadioButton" name="chatBgGradientButton" onclick="chatBgGradient[0] = '1'; chatBgGradient[1] = 'kreis'; changeChatBgGradientColor();" data-active="false"><div style="width:25px; height:25px; background-image:radial-gradient(#f58080, #cf2929); border-radius:3px;"></div></button>
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="ChatBgGradientColor1Picker" oninput="chatBgGradient[3] = this.value + dec2hex(document.getElementById('ChatBgGradientColor1OpacitySlider').value); changeChatBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0.5" id="ChatBgGradientColor1OpacitySlider" oninput="chatBgGradient[3] = (document.getElementById('ChatBgGradientColor1Picker').value + dec2hex(this.value)); changeChatBgGradientColor();">
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="ChatBgGradientColor2Picker" oninput="chatBgGradient[4] = this.value + dec2hex(document.getElementById('ChatBgGradientColor2OpacitySlider').value); changeChatBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0" id="ChatBgGradientColor2OpacitySlider" oninput="chatBgGradient[4] = (document.getElementById('ChatBgGradientColor2Picker').value + dec2hex(this.value)); changeChatBgGradientColor();">
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Runde Ecken</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont2x2">
                            <input type="number" class="navNumber" value="0" style="border-radius: 3px 0 0 0; text-align:center; border-style: solid none none solid; border-color:#ffffff30; border-width:1px;" oninput="chatBorderRadius[0] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="border-radius: 0 3px 0 0; text-align:center; border-style: solid solid none none; border-color:#ffffff30; border-width:1px;" oninput="chatBorderRadius[1] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="border-radius: 0 0 0 3px; text-align:center; border-style: none none solid solid; border-color:#ffffff30; border-width:1px;" oninput="chatBorderRadius[3] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="border-radius: 0 0 3px 0; text-align:center; border-style: none solid solid none; border-color:#ffffff30; border-width:1px;" oninput="chatBorderRadius[2] = this.value; changeChatAppearance();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Abstand zu Rand</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont3x3">
                            <input type="number" class="navNumber" value="0" style="grid-column:2; grid-row:1" oninput="chatPadding[0] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="grid-column:3; grid-row:2" oninput="chatPadding[1] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="grid-column:2; grid-row:3" oninput="chatPadding[2] = this.value; changeChatAppearance();">
                            <input type="number" class="navNumber" value="0" style="grid-column:1; grid-row:2" oninput="chatPadding[3] = this.value; changeChatAppearance();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>

            </section>
            <section class="navCat">
                <h2 class="navTitle">TIMING</h2>
                
                <section class="navSetting">
                    <p class="navDescr">Bewegungsdauer</p>
                    <div class="navSelectionGroup">
                        <input type="number" class="navNumber" value="200" oninput="messageMoveTime = this.value; document.body.style.setProperty('--message-move-time', messageMoveTime + 'ms');">
                        <p class="navNumberUnit">ms</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Verzögerungsdauer</p>
                    <div class="navSelectionGroup">
                        <input type="number" class="navNumber" value="0" oninput="messageDelay = this.value;">
                        <p class="navNumberUnit">ms</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Verweildauer</p>
                    <div class="navSelectionGroup">
                        <input type="number" class="navNumber" value="15000" oninput="messageRemoveTime = this.value; document.body.style.setProperty('--message-remove-time', messageRemoveTime + 'ms'); changeTiming()">
                        <p class="navNumberUnit">ms</p>
                    </div>
                </section>

            </section>
            <section class="navCat">
                <h2 class="navTitle">NUTZERNAME</h2>
                
                <section class="navSetting">
                    <p class="navDescr">Breite</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernameWidthButton" onclick="usernameSize = 'voll'; changeUsername()" data-active="false">⇔</button>
                        <button class="navRadioButton" name="usernameWidthButton" onclick="usernameSize = 'inhalt'; changeUsername()" data-active="true">abc</button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Position</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernamePositionButton" onclick="usernamePosition = 'links'; changeUsername()" data-active="true">←</button>
                        <button class="navRadioButton" name="usernamePositionButton" onclick="usernamePosition = 'mitte'; changeUsername()" data-active="false">|</button>
                        <button class="navRadioButton" name="usernamePositionButton" onclick="usernamePosition = 'rechts'; changeUsername()" data-active="false">→</button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Ausrichtung</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernameAlignButton" onclick="usernameAlign = 'links'; changeUsername();" data-active="true">←</button>
                        <button class="navRadioButton" name="usernameAlignButton" onclick="usernameAlign = 'mitte'; changeUsername();" data-active="false">|</button>
                        <button class="navRadioButton" name="usernameAlignButton" onclick="usernameAlign = 'rechts'; changeUsername();" data-active="false">→</button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Hintergrundfarbe</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernameBgColorButton" onclick="usernameBgColor = 'deaktiviert'; changeUsernameBgColor();"></button>
                        <button class="navRadioButton" name="usernameBgColorButton" onclick="usernameBgColor = 'twitch'; changeUsernameBgColor();"><img src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="usernameBgColorButton" onclick="usernameBgColor = 'twitch-transparent'; changeUsernameBgColor();" data-active="true"><img style="opacity:0.5;" src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="usernameBgColorButton" onclick="usernameBgColor = document.getElementById('UsernameBgColorPicker').value + dec2hex(document.getElementById('UsernameBgColorOpacitySlider').value); changeUsernameBgColor();"><input type="color" class="navColor" value="#ffffff" id="UsernameBgColorPicker" oninput="usernameBgColor = this.value + dec2hex(document.getElementById('UsernameBgColorOpacitySlider').value); changeUsernameBgColor()"><input type="range" min="0" max="1" step="0.01" value="1" id="UsernameBgColorOpacitySlider" oninput="usernameBgColor = document.getElementById('UsernameBgColorPicker').value + dec2hex(this.value); changeUsernameBgColor()"></button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Hintergrundverlauf</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernameBgGradientButton" onclick="usernameBgGradient[0] = '0'; changeUsernameBgGradientColor();" data-active="true"></button>
                        <button class="navRadioButton" name="usernameBgGradientButton" onclick="usernameBgGradient[0] = '1'; usernameBgGradient[1] = 'linear'; changeUsernameBgGradientColor();" data-active="false"><div style="width:25px; height:25px; margin-right:5px; background-image:linear-gradient(90deg, #f58080, #cf2929); border-radius:3px;"></div><input type="number" class="navNumber" value="180" oninput="chatBgGradient[2] = this.value + 'deg'; changeUsernameBgGradientColor();"><p class="navNumberUnit">°</p></button>
                        <button class="navRadioButton" name="usernameBgGradientButton" onclick="usernameBgGradient[0] = '1'; usernameBgGradient[1] = 'kreis'; changeUsernameBgGradientColor();" data-active="false"><div style="width:25px; height:25px; background-image:radial-gradient(#f58080, #cf2929); border-radius:3px;"></div></button>
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="UsernameBgGradientColor1Picker" oninput="usernameBgGradient[3] = this.value + dec2hex(document.getElementById('UsernameBgGradientColor1OpacitySlider').value); changeUsernameBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0.5" id="UsernameBgGradientColor1OpacitySlider" oninput="usernameBgGradient[3] = document.getElementById('UsernameBgGradientColor1Picker').value + dec2hex(this.value); changeUsernameBgGradientColor();">
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="UsernameBgGradientColor2Picker" oninput="usernameBgGradient[4] = this.value + dec2hex(document.getElementById('UsernameBgGradientColor2OpacitySlider').value); changeUsernameBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0" id="UsernameBgGradientColor2OpacitySlider" oninput="usernameBgGradient[4] = document.getElementById('UsernameBgGradientColor2Picker').value + dec2hex(this.value); changeUsernameBgGradientColor();">
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Schriftfarbe</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="usernameColorButton" onclick="usernameColor = 'deaktiviert'; changeUsernameFontColor();" data-active="false"></button>
                        <button class="navRadioButton" name="usernameColorButton" onclick="usernameColor = 'twitch'; changeUsernameFontColor();" data-active="false"><img src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="usernameColorButton" onclick="usernameColor = 'twitch-transparent'; changeUsernameFontColor();" data-active="false"><img style="opacity:0.5" src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="usernameColorButton" onclick="usernameColor = document.getElementById('UsernameFontColorPicker').value + dec2hex(document.getElementById('UsernameFontColorOpacitySlider').value); changeUsernameFontColor();" data-active="true"><input type="color" class="navColor" value="#ffffff" id="UsernameFontColorPicker" oninput="usernameColor = this.value + dec2hex(document.getElementById('UsernameFontColorOpacitySlider').value); changeUsernameFontColor();"><input type="range" min="0" max="1" step="0.01" value="1" id="UsernameFontColorOpacitySlider" oninput="usernameColor = document.getElementById('UsernameFontColorPicker').value + dec2hex(this.value); changeUsernameFontColor();"></button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Schriftart</p>
                    <input type="text" class="navTextbox" value="Arial" oninput="usernameFontFamily = this.value; changeUsername();">
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Schriftgröße</p>
                    <section class="navSelectionGroup">
                        <input type="number" class="navNumber" value="16" oninput="usernameFontSize = this.value; changeUsername();"><p class="navNumberUnit">px</p>
                    </section>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Zusätzliche Größe</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont3x3">
                            <input type="number" class="navNumber" style="grid-column:2; grid-row:1" value="10" oninput="usernamePadding[0] = this.value; changeUsername();">
                            <input type="number" class="navNumber" style="grid-column:3; grid-row:2" value="10" oninput="usernamePadding[1] = this.value; changeUsername();">
                            <input type="number" class="navNumber" style="grid-column:2; grid-row:3" value="10" oninput="usernamePadding[2] = this.value; changeUsername();">
                            <input type="number" class="navNumber" style="grid-column:1; grid-row:2" value="10" oninput="usernamePadding[3] = this.value; changeUsername();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Runde Ecken</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont2x2">
                            <input type="number" class="navNumber" value="10" style="border-radius: 3px 0 0 0; text-align:center; border-style: solid none none solid; border-color:#ffffff30; border-width:1px;" oninput="usernameBorderRadius[0] = this.value; changeUsername();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 3px 0 0; text-align:center; border-style: solid solid none none; border-color:#ffffff30; border-width:1px;" oninput="usernameBorderRadius[1] = this.value; changeUsername();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 0 0 3px; text-align:center; border-style: none none solid solid; border-color:#ffffff30; border-width:1px;" oninput="usernameBorderRadius[3] = this.value; changeUsername();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 0 3px 0; text-align:center; border-style: none solid solid none; border-color:#ffffff30; border-width:1px;" oninput="usernameBorderRadius[2] = this.value; changeUsername();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>

            </section>
            <section class="navCat">
                <h2 class="navTitle">NACHRICHT</h2>

                <section class="navSetting">
                    <p class="navDescr">Breite</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messageWidthButton" onclick="messageSize = 'voll'; changeMessage()" data-active="true">⇔</button>
                        <button class="navRadioButton" name="messageWidthButton" onclick="messageSize = 'inhalt'; changeMessage()" data-active="false">abc</button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Position</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messagePositionButton" onclick="messagePosition = 'links'; changeMessage()" data-active="true">←</button>
                        <button class="navRadioButton" name="messagePositionButton" onclick="messagePosition = 'mitte'; changeMessage()" data-active="false">|</button>
                        <button class="navRadioButton" name="messagePositionButton" onclick="messagePosition = 'rechts'; changeMessage()" data-active="false">→</button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Ausrichtung</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messageAlignButton" onclick="messageAlign = 'links'; changeMessage();" data-active="true">←</button>
                        <button class="navRadioButton" name="messageAlignButton" onclick="messageAlign = 'mitte'; changeMessage();" data-active="false">|</button>
                        <button class="navRadioButton" name="messageAlignButton" onclick="messageAlign = 'rechts'; changeMessage();" data-active="false">→</button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Hintergrundfarbe</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messageBgColorButton" onclick="messageBgColor = 'deaktiviert'; changeMessageBgColor();"></button>
                        <button class="navRadioButton" name="messageBgColorButton" onclick="messageBgColor = 'twitch'; changeMessageBgColor();"><img src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="messageBgColorButton" onclick="messageBgColor = 'twitch-transparent'; changeMessageBgColor();" data-active="false"><img style="opacity:0.5;" src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="messageBgColorButton" onclick="messageBgColor = document.getElementById('MessageBgColorPicker').value + dec2hex(document.getElementById('MessageBgColorOpacitySlider').value); changeMessageBgColor();" data-active="true" id="MessageBgColorCustomRadio"><input type="color" class="navColor" value="#000000" id="MessageBgColorPicker" oninput="messageBgColor = this.value + dec2hex(document.getElementById('MessageBgColorOpacitySlider').value); changeMessageBgColor()" id="MessageBgColorPicker"><input type="range" min="0" max="1" step="0.01" value="0.4" id="MessageBgColorOpacitySlider" oninput="messageBgColor = document.getElementById('MessageBgColorPicker').value + dec2hex(this.value); changeMessageBgColor()"></button>
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Hintergrundverlauf</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messageBgGradientButton" onclick="messageBgGradient[0] = '0'; changeMessageBgGradientColor();" data-active="true"></button>
                        <button class="navRadioButton" name="messageBgGradientButton" onclick="messageBgGradient[0] = '1'; messageBgGradient[1] = 'linear'; changeMessageBgGradientColor();" data-active="false"><div style="width:25px; height:25px; margin-right:5px; background-image:linear-gradient(90deg, #f58080, #cf2929); border-radius:3px;"></div><input type="number" class="navNumber" value="180" oninput="messageBgGradient[2] = this.value + 'deg'; changeMessageBgGradientColor();"><p class="navNumberUnit">°</p></button>
                        <button class="navRadioButton" name="messageBgGradientButton" onclick="messageBgGradient[0] = '1'; messageBgGradient[1] = 'kreis'; changeMessageBgGradientColor();" data-active="false"><div style="width:25px; height:25px; background-image:radial-gradient(#f58080, #cf2929); border-radius:3px;"></div></button>
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="MessageBgGradientColor1Picker" oninput="messageBgGradient[3] = this.value + dec2hex(document.getElementById('MessageBgGradientColor1OpacitySlider').value); changeMessageBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0.5" id="MessageBgGradientColor1OpacitySlider" oninput="messageBgGradient[3] = document.getElementById('MessageBgGradientColor1Picker').value + dec2hex(this.value); changeMessageBgGradientColor();">
                    </div>
                    <div class="navSelectionGroup">
                        <input type="color" class="navColor" value="#000000" id="MessageBgGradientColor2Picker" oninput="messageBgGradient[4] = this.value + dec2hex(document.getElementById('MessageBgGradientColor2OpacitySlider').value); changeMessageBgGradientColor();">
                        <input type="range" min="0" max="1" step="0.01" value="0" id="MessageBgGradientColor2OpacitySlider" oninput="messageBgGradient[4] = document.getElementById('MessageBgGradientColor2Picker').value + dec2hex(this.value); changeMessageBgGradientColor();">
                    </div>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Schriftfarbe</p>
                    <div class="navSelectionGroup">
                        <button class="navRadioButton" name="messageFontColorButton" onclick="messageColor = 'deaktiviert'; changeMessageFontColor();" data-active="false"></button>
                        <button class="navRadioButton" name="messageFontColorButton" onclick="messageColor = 'twitch'; changeMessageFontColor();" data-active="false"><img src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="messageFontColorButton" onclick="messageColor = 'twitch-transparent'; changeMessageFontColor();" data-active="false"><img style="opacity:0.5;" src="https://vignette.wikia.nocookie.net/vinesauce/images/9/95/Twitch_favicon.png/revision/latest/scale-to-width-down/22?cb=20200801222836"></button>
                        <button class="navRadioButton" name="messageFontColorButton" onclick="messageColor = document.getElementById('MessageFontColorPicker').value + dec2hex(document.getElementById('MessageFontColorOpacitySlider').value); changeMessageFontColor();" id="MessageColorCustomRadio" data-active="true"><input type="color" class="navColor" value="#ffffff" id="MessageFontColorPicker" oninput="messageColor = this.value + dec2hex(document.getElementById('MessageFontColorOpacitySlider').value); changeMessageFontColor();"><input type="range" min="0" max="1" step="0.01" value="1" id="MessageFontColorOpacitySlider" oninput="messageColor = document.getElementById('MessageFontColorPicker').value + dec2hex(this.value); changeMessageFontColor();"></button>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Schriftart</p>
                    <input type="text" class="navTextbox" value="Arial" oninput="messageFontFamily = this.value; changeMessage();">
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Schriftgröße</p>
                    <section class="navSelectionGroup">
                        <input type="number" class="navNumber" value="16" oninput="messageFontSize = this.value; changeMessage();"><p class="navNumberUnit">px</p>
                    </section>
                </section>

                <section class="navSetting">
                    <p class="navDescr">Zusätzliche Größe</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont3x3">
                            <input type="number" class="navNumber" value="10" style="grid-column:2; grid-row:1" oninput="messagePadding[0] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="grid-column:2; grid-row:3" oninput="messagePadding[2] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="grid-column:1; grid-row:2" oninput="messagePadding[3] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="grid-column:3; grid-row:2" oninput="messagePadding[1] = this.value; changeMessage();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>
                
                <section class="navSetting">
                    <p class="navDescr">Runde Ecken</p>
                    <div class="navSelectionGroup">
                        <div class="navGridCont2x2">
                            <input type="number" class="navNumber" value="10" style="border-radius: 3px 0 0 0; text-align:center; border-style: solid none none solid; border-color:#ffffff30; border-width:1px;" oninput="messageBorderRadius[0] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 3px 0 0; text-align:center; border-style: solid solid none none; border-color:#ffffff30; border-width:1px;" oninput="messageBorderRadius[1] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 0 0 3px; text-align:center; border-style: none none solid solid; border-color:#ffffff30; border-width:1px;" oninput="messageBorderRadius[3] = this.value; changeMessage();">
                            <input type="number" class="navNumber" value="10" style="border-radius: 0 0 3px 0; text-align:center; border-style: none solid solid none; border-color:#ffffff30; border-width:1px;" oninput="messageBorderRadius[2] = this.value; changeMessage();">
                        </div>
                        <p class="navNumberUnit">px</p>
                    </div>
                </section>
            </section>
        </nav>
        <main>
            <div class="previewCont">
                <div class="navSelectionGroup">
                    <p class="navDescr">Breite:</p>
                    <input type="number" class="navNumber" value="400" oninput="document.getElementById('Widget').style.width = this.value + 'px'; document.getElementById('Widget-PH').style.width = this.value + 'px';">
                    <p class="navNumberUnit">px</p>
                </div>
                <div class="navSelectionGroup">
                    <p class="navDescr">Höhe:</p>
                    <input type="number" class="navNumber" value="600" oninput="document.getElementById('Widget').style.height = this.value + 'px'; document.getElementById('Widget-PH').style.height = this.value + 'px';">
                    <p class="navNumberUnit">px</p>
                </div>
                <div class="navSelectionGroup">
                    <p class="navDescr">Hintergrund:</p>
                    <button class="navRadioButton" name="previewBackgroundButton" data-active="true" onclick="document.getElementsByTagName('Body')[0].style.backgroundImage = 'url(Hintergrund/Hintergrund1.svg)'">1</button>
                    <button class="navRadioButton" name="previewBackgroundButton" data-active="false" onclick="document.getElementsByTagName('Body')[0].style.backgroundImage = 'url(Hintergrund/Hintergrund2.svg)'">2</button>
                    <button class="navRadioButton" name="previewBackgroundButton" data-active="false" onclick="document.getElementsByTagName('Body')[0].style.backgroundImage = 'url(Hintergrund/Hintergrund3.svg)'">3</button>
                </div>
                <div class="navSelectionGroup">
                    <p class="navDescr">Verschwommen:</p>
                    <input type="number" class="navNumber" value="0" oninput="document.getElementById('Widget').style.backdropFilter='blur(' + this.value + 'px)';">
                    <p class="navNumberUnit">px</p>
                </div>
            </div>
            <div id="Widget"></div>
            <div id="Widget-PH"></div>
            <input type="button" class="saveAs" value="Speichern" onclick="saveToFile()">
        </main>
        <script type="text/javascript">
            function connectChannel() {
                channelList = document.getElementById("ChannelTextbox").value;
                client = new tmi.Client({
                    channels: [channelList]
                });
                client.connect();

                client.on('message', (channel, tags, message, self) => {
                    function buildMessage() {
                        var emoteTxt = tags['emotes-raw'],
                            emoteCol = [],
                            messageFinal = '',
                            newChatCont = document.createElement('div'),
                            newUsernameCont = document.createElement('div'),
                            newMessageCont = document.createElement('div'),
                            newUsername = document.createElement('p'),
                            newMessage = document.createElement('p'),
                            
                            newChatContPH = document.createElement('div'),
                            newUsernameContPH = document.createElement('div'),
                            newMessageContPH = document.createElement('div'),
                            newUsernamePH = document.createElement('p'),
                            newMessagePH = document.createElement('p'),
                            
                            benutzername = tags['display-name'],
                            colorTransparent,
                            i,
                            j,
                            
                            emoteName, emotePosStart, emotePosEnd, lastPoint;
                        
                        if (tags.color === null) {
                            tags.color = '#6B2794';
                        }
                        colorTransparent = 'rgb(' + hex2dec(tags.color.slice(1, 3)) + ' ' + hex2dec(tags.color.slice(3, 5)) + ' ' + hex2dec(tags.color.slice(5, 7)) + ' / ' + userColorOpacity + ')';
                        newChatCont.setAttribute('class', 'chat-line chat-line-SHOW');
                        newUsernameCont.setAttribute('class', 'usernameCont usernameCont-SHOW');
                        newMessageCont.setAttribute('class', 'messageCont messageCont-SHOW');
                        newUsername.setAttribute('class', 'username username-SHOW');
                        newMessage.setAttribute('class', 'message message-SHOW');
                        
                        newChatContPH.setAttribute('class', 'chat-line chat-line-PH');
                        newUsernameContPH.setAttribute('class', 'usernameCont usernameCont-PH');
                        newMessageContPH.setAttribute('class', 'messageCont messageCont-PH');
                        newUsernamePH.setAttribute('class', 'username username-PH');
                        newMessagePH.setAttribute('class', 'message message-PH');
                        
                        window.changeChatBgColor = function () {
                            if (chatBgColor === 'deaktiviert') {
                                document.body.style.setProperty('--bg-color-chat', 'transparent');
                            } else if (chatBgColor === 'twitch') {
                                document.body.style.setProperty('--bg-color-chat', tags.color);
                            } else if (chatBgColor === 'twitch-transparent') {
                                document.body.style.setProperty('--bg-color-chat', colorTransparent);
                            } else {
                                document.body.style.setProperty('--bg-color-chat', chatBgColor);
                            }
                        }

                        window.changeChatBgGradientColor = function () {
                            if (chatBgGradient[0] === '1') {
                                if (chatBgGradient[1] === 'linear') {
                                    document.getElementById("Widget").style.backgroundImage = "linear-gradient(" + chatBgGradient[2] + ", " + chatBgGradient[3] + ", " + chatBgGradient[4] + ")";
                                } else {
                                    document.getElementById("Widget").style.backgroundImage = "radial-gradient(" + chatBgGradient[3] + ", " + chatBgGradient[4] + ")";
                                }
                            } else {
                                document.getElementById("Widget").style.backgroundImage = "";
                            }
                        }
                        
                        window.changeUsernameFontColor = function () {
                            if (usernameColor === 'deaktiviert') {
                                newUsernameCont.style.setProperty('--color-username', 'transparent');
                            } else if (usernameColor === 'twitch') {
                                newUsernameCont.style.setProperty('--color-username', tags.color);
                            } else if (usernameColor === 'twitch-transparent') {
                                newUsernameCont.style.setProperty('--color-username', colorTransparent);
                            } else {
                                newUsernameCont.style.setProperty('--color-username', usernameColor);
                            }
                        }
                        
                        window.changeUsernameBgColor = function () {
                            if (usernameBgColor === 'deaktiviert') {
                                newChatCont.style.setProperty('--bg-color-username', 'transparent');
                            } else if (usernameBgColor === 'twitch') {
                                newChatCont.style.setProperty('--bg-color-username', tags.color);
                            } else if (usernameBgColor === 'twitch-transparent') {
                                newChatCont.style.setProperty('--bg-color-username', colorTransparent);
                            } else {
                                newChatCont.style.setProperty('--bg-color-username', usernameBgColor);
                            }
                        }

                        window.changeUsernameBgGradientColor = function () {
                            if (usernameBgGradient[0] === '1') {
                                if (usernameBgGradient[1] === 'linear') {
                                    newUsername.style.backgroundImage = "linear-gradient(" + usernameBgGradient[2] + ", " + usernameBgGradient[3] + ", " + usernameBgGradient[4] + ")";
                                } else {
                                    newUsername.style.backgroundImage = "radial-gradient(" + usernameBgGradient[3] + ", " + usernameBgGradient[4] + ")";
                                }
                            } else {
                                newUsername.style.backgroundImage = "";
                            }
                        }
                        
                        window.changeMessageFontColor = function () {
                            if (messageColor === 'deaktiviert') {
                                newChatCont.style.setProperty('--color-message', 'transparent');
                            } else if (messageColor === 'twitch') {
                                newChatCont.style.setProperty('--color-message', tags.color);
                            } else if (messageColor === 'twitch-transparent') {
                                newChatCont.style.setProperty('--color-message', colorTransparent);
                            } else {
                                newChatCont.style.setProperty('--color-message', messageColor);
                            }
                        }
                        
                        window.changeMessageBgColor = function () {
                            if (messageBgColor === 'twitch') {
                                newChatCont.style.setProperty('--bg-color-message', tags.color);
                            } else if (messageBgColor === 'twitch-transparent') {
                                newChatCont.style.setProperty('--bg-color-message', colorTransparent);
                            } else {
                                newChatCont.style.setProperty('--bg-color-message', messageBgColor);
                            }
                        }

                        window.changeMessageBgGradientColor = function () {
                            if (messageBgGradient[0] === '1') {
                                if (messageBgGradient[1] === 'linear') {
                                    newMessage.style.backgroundImage = "linear-gradient(" + messageBgGradient[2] + ", " + messageBgGradient[3] + ", " + messageBgGradient[4] + ")";
                                } else {
                                    newMessage.style.backgroundImage = "radial-gradient(" + messageBgGradient[3] + ", " + messageBgGradient[4] + ")";
                                }
                            } else {
                                newMessage.style.backgroundImage = "";
                            }
                        }
                        
                        window.changeTiming = function () {
                            if (messageRemoveTime > 0) {
                                document.body.style.setProperty('--animation-up', 'showMessageUp ' + messageMoveTime + 'ms, hideMessage ' + messageMoveTime + 'ms ' + (2 * messageMoveTime + parseInt(messageRemoveTime)) + 'ms forwards');
                                document.body.style.setProperty('--animation-down', 'showMessageDown ' + messageMoveTime + 'ms, hideMessage ' + messageMoveTime + 'ms ' + (2 * messageMoveTime + parseInt(messageRemoveTime)) + 'ms forwards');
                                setTimeout( function () {
                                    newChatCont.remove();
                                    newChatContPH.remove();
                                }, (messageRemoveTime + (messageMoveTime * 3)));
                            } else {
                                document.body.style.setProperty('--animation-up', 'showMessageUp ' + messageMoveTime + 'ms');
                                document.body.style.setProperty('--animation-down', 'showMessageDown ' + messageMoveTime + 'ms');
                            }
                        }

                        changeChatBgColor();
                        changeChatBgGradientColor();
                        changeUsernameBgColor();
                        changeUsernameFontColor();
                        changeUsernameBgGradientColor();
                        changeMessageBgColor();
                        changeMessageFontColor();
                        changeMessageBgGradientColor();

                        if (emoteTxt !== null) {
                            for (i = 0; i <= emoteTxt.length; i++) {
                                if (emoteTxt[i] === ':') {
                                    emoteName = emoteTxt.slice(0, i);
                                    lastPoint = i;
                                }
                        
                                if (emoteTxt[i] === '-') {
                                    emotePosStart = parseInt(emoteTxt.slice(lastPoint + 1, i));
                                    lastPoint = i;
                                }
                        
                                if (emoteTxt[i] === ',') {
                                    emotePosEnd = parseInt(emoteTxt.slice(lastPoint + 1, i));
                                    emoteCol[emoteCol.length] = {name: emoteName, posStart: emotePosStart, posEnd: emotePosEnd};
                                    lastPoint = i;
                                }
                        
                                if (emoteTxt[i] === '/' || i === emoteTxt.length) {
                                    emotePosEnd = parseInt(emoteTxt.slice(lastPoint + 1, i));
                                    emoteCol[emoteCol.length] = {name: emoteName, posStart: emotePosStart, posEnd: emotePosEnd};
                                    emoteTxt = emoteTxt.substring(i + 1, emoteTxt.length);
                                    i = 0;
                                    lastPoint = i;
                                }
                            }
                        
                            emoteCol.sort(function(a, b) {return a.posStart - b.posStart});
                            
                            for (i = 0; i < emoteCol.length; i++) {
                                messageFinal += message.substring(lastPoint, emoteCol[i].posStart);
                                messageFinal += '<img class="emote" src="https://static-cdn.jtvnw.net/emoticons/v2/' + emoteCol[i].name + '/default/dark/1.0">';
                                lastPoint = emoteCol[i].posEnd + 1;
                                if (i === emoteCol.length - 1) {
                                    messageFinal += message.substring(lastPoint, message.length);
                                }
                            }
                        } else {
                            messageFinal = message;
                        }
                
                        newUsername.innerHTML = benutzername;
                        newMessage.innerHTML = messageFinal;
                        newUsernameCont.appendChild(newUsername);
                        newMessageCont.appendChild(newMessage);
                        newChatCont.appendChild(newUsernameCont);
                        newChatCont.appendChild(newMessageCont);
                        document.getElementById('Widget').appendChild(newChatCont);
                        
                        newUsernamePH.innerHTML = benutzername;
                        newMessagePH.innerHTML = messageFinal;
                        newUsernameContPH.appendChild(newUsernamePH);
                        newMessageContPH.appendChild(newMessagePH);
                        newChatContPH.appendChild(newUsernameContPH);
                        newChatContPH.appendChild(newMessageContPH);
                        document.getElementById('Widget-PH').appendChild(newChatContPH);
                        
                        messageFinal = '';
                        emoteCol = [];

                        repositionMessages();
                        changeTiming();
                    }

                    setTimeout(buildMessage, messageDelay);
                });
                
                document.body.setAttribute('data-flow', chatFlow);
                document.body.style.setProperty('--animation-up', 'showMessageUp ' + messageMoveTime + 'ms, hideMessage ' + messageMoveTime + 'ms ' + ((2 * messageMoveTime) + messageRemoveTime) + 'ms forwards');
                document.body.style.setProperty('--animation-down', 'showMessageDown ' + messageMoveTime + 'ms, hideMessage ' + messageMoveTime + 'ms ' + ((2 * messageMoveTime) + messageRemoveTime) + 'ms forwards');
                document.body.style.setProperty('--message-move-time', messageMoveTime + 'ms');
                document.body.style.setProperty('--message-remove-time', messageRemoveTime + 'ms');
                document.body.style.setProperty('--message-space', chatSpace + 'px');
                
                document.body.style.setProperty('--username-padding', usernamePadding[0] + 'px ' + usernamePadding[1] + 'px ' + usernamePadding[2] + 'px ' + usernamePadding[3] + 'px');
                document.body.style.setProperty('--username-border-radius', usernameBorderRadius[0] + 'px ' + usernameBorderRadius[1] + 'px ' + usernameBorderRadius[2] + 'px ' + usernameBorderRadius[3] + 'px');
                
                changeUsername();
                
                document.body.style.setProperty('--message-padding', messagePadding[0] + 'px ' + messagePadding[1] + 'px ' + messagePadding[2] + 'px ' + messagePadding[3] + 'px');
                document.body.style.setProperty('--message-font-family', messageFontFamily);
                document.body.style.setProperty('--message-font-size', messageFontSize + 'px');
                document.body.style.setProperty('--message-border-radius', messageBorderRadius[0] + 'px ' + messageBorderRadius[1] + 'px ' + messageBorderRadius[2] + 'px ' + messageBorderRadius[3] + 'px');
                
                if (messageSize === 'inhalt') {
                    document.body.style.setProperty('--message-size', 'max-content');
                } else if (messageSize === 'voll') {
                    document.body.style.setProperty('--message-size', '100%');
                }
                
                if (messagePosition === 'links') {
                    document.body.style.setProperty('--message-position', 'flex-start');
                } else if (messagePosition === 'mitte') {
                    document.body.style.setProperty('--message-position', 'center');
                } else if (messagePosition === 'rechts') {
                    document.body.style.setProperty('--message-position', 'flex-end');
                }
                
                if (messageAlign === 'links') {
                    document.body.style.setProperty('--message-align', 'left');
                } else if (messageAlign === 'mitte') {
                    document.body.style.setProperty('--message-align', 'center');
                } else if (messageAlign === 'rechts') {
                    document.body.style.setProperty('--message-align', 'right');
                }
            }

            function disconnectChannel() {
                client.disconnect();
            }

            function repositionMessages() {
                for (i = 0; i < document.getElementsByClassName('chat-line-SHOW').length; i++) {
                    document.getElementsByClassName('chat-line-SHOW')[i].style.top = document.getElementsByClassName('chat-line-PH')[i].offsetTop + 'px';
                    document.getElementsByClassName('chat-line-SHOW')[i].style.left = document.getElementsByClassName('chat-line-PH')[i].offsetLeft + 'px';
                    document.getElementsByClassName('chat-line-SHOW')[i].style.width = document.getElementsByClassName('chat-line-PH')[i].clientWidth + 'px';
                    document.getElementsByClassName('chat-line-SHOW')[i].style.height = document.getElementsByClassName('chat-line-PH')[i].clientHeight + 'px';
                }
            }

            function changeChatAppearance() {
                document.body.style.setProperty('--chat-border-radius', chatBorderRadius[0] + 'px ' + chatBorderRadius[1] + 'px ' + chatBorderRadius[2] + 'px ' + chatBorderRadius[3] + 'px');
                document.body.style.setProperty('--chat-padding', chatPadding[0] + 'px ' + chatPadding[1] + 'px ' + chatPadding[2] + 'px ' + chatPadding[3] + 'px');
            }

            function changeUsername() {
                if (usernameSize === 'inhalt') {
                    document.body.style.setProperty('--username-size', 'max-content');
                } else if (usernameSize === 'voll') {
                    document.body.style.setProperty('--username-size', '100%');
                }
                
                if (usernamePosition === 'links') {
                    document.body.style.setProperty('--username-position', 'flex-start');
                } else if (usernamePosition === 'mitte') {
                    document.body.style.setProperty('--username-position', 'center');
                } else if (usernamePosition === 'rechts') {
                    document.body.style.setProperty('--username-position', 'flex-end');
                }
                
                if (usernameAlign === 'links') {
                    document.body.style.setProperty('--username-align', 'left');
                } else if (usernameAlign === 'mitte') {
                    document.body.style.setProperty('--username-align', 'center');
                } else if (usernameAlign === 'rechts') {
                    document.body.style.setProperty('--username-align', 'right');
                }
                
                document.body.style.setProperty('--username-font-family', usernameFontFamily);
                document.body.style.setProperty('--username-font-size', usernameFontSize + 'px');
                document.body.style.setProperty('--username-border-radius', usernameBorderRadius[0] + 'px ' + usernameBorderRadius[1] + 'px ' + usernameBorderRadius[2] + 'px ' + usernameBorderRadius[3] + 'px');
                document.body.style.setProperty('--username-padding', usernamePadding[0] + 'px ' + usernamePadding[1] + 'px ' + usernamePadding[2] + 'px ' + usernamePadding[3] + 'px');
            }
            
            function changeMessage() {
                if (messageSize === 'inhalt') {
                    document.body.style.setProperty('--message-size', 'max-content');
                } else if (messageSize === 'voll') {
                    document.body.style.setProperty('--message-size', '100%');
                }
                
                if (messagePosition === 'links') {
                    document.body.style.setProperty('--message-position', 'flex-start');
                } else if (messagePosition === 'mitte') {
                    document.body.style.setProperty('--message-position', 'center');
                } else if (messagePosition === 'rechts') {
                    document.body.style.setProperty('--message-position', 'flex-end');
                }
                
                if (messageAlign === 'links') {
                    document.body.style.setProperty('--message-align', 'left');
                } else if (messageAlign === 'mitte') {
                    document.body.style.setProperty('--message-align', 'center');
                } else if (messageAlign === 'rechts') {
                    document.body.style.setProperty('--message-align', 'right');
                }
                
                document.body.style.setProperty('--message-font-family', messageFontFamily);
                document.body.style.setProperty('--message-font-size', messageFontSize + 'px');
                document.body.style.setProperty('--message-border-radius', messageBorderRadius[0] + 'px ' + messageBorderRadius[1] + 'px ' + messageBorderRadius[2] + 'px ' + messageBorderRadius[3] + 'px');
                document.body.style.setProperty('--message-padding', messagePadding[0] + 'px ' + messagePadding[1] + 'px ' + messagePadding[2] + 'px ' + messagePadding[3] + 'px');
            }

            function saveToFile() {
                var exportText = "var channelList = [ '" + document.getElementById("ChannelTextbox").value + "' ], userColorOpacity = '" + userColorOpacity + "', chatFlow = '" + chatFlow + "', chatSpace = " + chatSpace + ", chatBgColor = '" + chatBgColor + "', chatBgGradient = ['" + chatBgGradient[0] + "', '" + chatBgGradient[1] + "', '" + chatBgGradient[2] + "', '" + chatBgGradient[3] + "', '" + chatBgGradient[4] + "'], chatBorderRadius = [" + chatBorderRadius + "], chatPadding = [" + chatPadding + "], messageMoveTime = " + messageMoveTime + ", messageDelay = " + messageDelay + ", messageRemoveTime = " + messageRemoveTime + ", usernameSize = '" + usernameSize + "', usernamePosition = '" + usernamePosition + "', usernameAlign = '" + usernameAlign + "', usernameBgColor = '" + usernameBgColor + "', usernameBgGradient = ['" + usernameBgGradient[0] + "', '" + usernameBgGradient[1] + "', '" + usernameBgGradient[2] + "', '" + usernameBgGradient[3] + "', '" + usernameBgGradient[4] + "'], usernameColor = '" + usernameColor + "', usernameFontFamily = '" + usernameFontFamily + "', usernameFontSize = " + usernameFontSize + ", usernamePadding = [" + usernamePadding + "], usernameBorderRadius = [" + usernameBorderRadius + "], messageSize = '" + messageSize + "', messagePosition = '" + messagePosition + "', messageAlign = '" + messageAlign + "', messageBgColor = '" + messageBgColor + "', messageBgGradient = ['" + messageBgGradient[0] + "', '" + messageBgGradient[1] + "', '" + messageBgGradient[2] + "', '" + messageBgGradient[3] + "', '" + messageBgGradient[4] + "'], messageColor = '" + messageColor + "', messageFontFamily = '" + messageFontFamily + "', messageFontSize = " + messageFontSize + ", messagePadding = [" + messagePadding + "], messageBorderRadius = [" + messageBorderRadius + "];",
                    blob = new Blob([exportText], {type: "text/plain;charset=utf-8"});
                saveAs(blob, "settings.js");
            }

            for (i = 0; i < document.getElementsByClassName("navRadioButton").length; i++) {
                document.getElementsByClassName("navRadioButton")[i].addEventListener("click", function () {
                    for (j = 0; j < document.getElementsByName(this.name).length; j++) {
                        document.getElementsByName(this.name)[j].setAttribute('data-active', 'false');
                    }
                    this.setAttribute('data-active', 'true'); 
                });
            }
        </script>
    </body>
</html>